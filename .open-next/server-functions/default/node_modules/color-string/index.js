var colorNames=require("color-name"),swizzle=require("simple-swizzle"),hasOwnProperty=Object.hasOwnProperty,reverseNames=Object.create(null);for(var name in colorNames)hasOwnProperty.call(colorNames,name)&&(reverseNames[colorNames[name]]=name);var cs=module.exports={to:{},get:{}};function clamp(r,e,a){return Math.min(Math.max(e,r),a)}function hexDouble(r){var e=Math.round(r).toString(16).toUpperCase();return e.length<2?"0"+e:e}cs.get=function(r){var e,a;switch(r.substring(0,3).toLowerCase()){case"hsl":e=cs.get.hsl(r),a="hsl";break;case"hwb":e=cs.get.hwb(r),a="hwb";break;default:e=cs.get.rgb(r),a="rgb"}return e?{model:a,value:e}:null},cs.get.rgb=function(r){if(!r)return null;var e,a,s,t=/^#([a-f0-9]{3,4})$/i,n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,l=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,u=/^(\w+)$/,c=[0,0,0,1];if(e=r.match(n)){for(s=e[2],e=e[1],a=0;a<3;a++){var h=2*a;c[a]=parseInt(e.slice(h,h+2),16)}s&&(c[3]=parseInt(s,16)/255)}else if(e=r.match(t)){for(s=(e=e[1])[3],a=0;a<3;a++)c[a]=parseInt(e[a]+e[a],16);s&&(c[3]=parseInt(s+s,16)/255)}else if(e=r.match(l)){for(a=0;a<3;a++)c[a]=parseInt(e[a+1],0);e[4]&&(e[5]?c[3]=.01*parseFloat(e[4]):c[3]=parseFloat(e[4]))}else{if(!(e=r.match(o)))return(e=r.match(u))?"transparent"===e[1]?[0,0,0,0]:hasOwnProperty.call(colorNames,e[1])?((c=colorNames[e[1]])[3]=1,c):null:null;for(a=0;a<3;a++)c[a]=Math.round(2.55*parseFloat(e[a+1]));e[4]&&(e[5]?c[3]=.01*parseFloat(e[4]):c[3]=parseFloat(e[4]))}for(a=0;a<3;a++)c[a]=clamp(c[a],0,255);return c[3]=clamp(c[3],0,1),c},cs.get.hsl=function(r){if(!r)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,a=r.match(e);if(a){var s=parseFloat(a[4]);return[(parseFloat(a[1])%360+360)%360,clamp(parseFloat(a[2]),0,100),clamp(parseFloat(a[3]),0,100),clamp(isNaN(s)?1:s,0,1)]}return null},cs.get.hwb=function(r){if(!r)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,a=r.match(e);if(a){var s=parseFloat(a[4]);return[(parseFloat(a[1])%360+360)%360,clamp(parseFloat(a[2]),0,100),clamp(parseFloat(a[3]),0,100),clamp(isNaN(s)?1:s,0,1)]}return null},cs.to.hex=function(){var r=swizzle(arguments);return"#"+hexDouble(r[0])+hexDouble(r[1])+hexDouble(r[2])+(r[3]<1?hexDouble(Math.round(255*r[3])):"")},cs.to.rgb=function(){var r=swizzle(arguments);return r.length<4||1===r[3]?"rgb("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+")":"rgba("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+", "+r[3]+")"},cs.to.rgb.percent=function(){var r=swizzle(arguments),e=Math.round(r[0]/255*100),a=Math.round(r[1]/255*100),s=Math.round(r[2]/255*100);return r.length<4||1===r[3]?"rgb("+e+"%, "+a+"%, "+s+"%)":"rgba("+e+"%, "+a+"%, "+s+"%, "+r[3]+")"},cs.to.hsl=function(){var r=swizzle(arguments);return r.length<4||1===r[3]?"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)":"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+r[3]+")"},cs.to.hwb=function(){var r=swizzle(arguments),e="";return r.length>=4&&1!==r[3]&&(e=", "+r[3]),"hwb("+r[0]+", "+r[1]+"%, "+r[2]+"%"+e+")"},cs.to.keyword=function(r){return reverseNames[r.slice(0,3)]};