"use strict";let NoWorkResult=require("./no-work-result"),LazyResult=require("./lazy-result"),Document=require("./document"),Root=require("./root");class Processor{constructor(s=[]){this.version="8.4.31",this.plugins=this.normalize(s)}normalize(s){let e=[];for(let o of s)if(!0===o.postcss?o=o():o.postcss&&(o=o.postcss),"object"==typeof o&&Array.isArray(o.plugins))e=e.concat(o.plugins);else if("object"==typeof o&&o.postcssPlugin)e.push(o);else if("function"==typeof o)e.push(o);else{if("object"!=typeof o||!o.parse&&!o.stringify)throw new Error(o+" is not a PostCSS plugin");if("production"!==process.env.NODE_ENV)throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}return e}process(s,e={}){return 0===this.plugins.length&&void 0===e.parser&&void 0===e.stringifier&&void 0===e.syntax?new NoWorkResult(this,s,e):new LazyResult(this,s,e)}use(s){return this.plugins=this.plugins.concat(this.normalize([s])),this}}module.exports=Processor,Processor.default=Processor,Root.registerProcessor(Processor),Document.registerProcessor(Processor);