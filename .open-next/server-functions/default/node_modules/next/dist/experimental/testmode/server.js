"use strict";function _export(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{interceptTestApis:function(){return interceptTestApis},wrapRequestHandlerNode:function(){return wrapRequestHandlerNode},wrapRequestHandlerWorker:function(){return wrapRequestHandlerWorker}});const _context=require("./context"),_fetch=require("./fetch"),_httpget=require("./httpget"),reader={url:e=>e.url??"",header(e,t){const r=e.headers[t];return null==r?null:"string"==typeof r?r:r[0]??null}};function interceptTestApis(){const e=global.fetch,t=(0,_fetch.interceptFetch)(e),r=(0,_httpget.interceptHttpGet)(e);return()=>{t(),r()}}function wrapRequestHandlerWorker(e){return(t,r)=>(0,_context.withRequest)(t,reader,(()=>e(t,r)))}function wrapRequestHandlerNode(e){return(t,r,n)=>(0,_context.withRequest)(t,reader,(()=>e(t,r,n)))}