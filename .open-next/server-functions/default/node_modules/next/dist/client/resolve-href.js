"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"resolveHref",{enumerable:!0,get:function(){return resolveHref}});const _querystring=require("../shared/lib/router/utils/querystring"),_formaturl=require("../shared/lib/router/utils/format-url"),_omit=require("../shared/lib/router/utils/omit"),_utils=require("../shared/lib/utils"),_normalizetrailingslash=require("./normalize-trailing-slash"),_islocalurl=require("../shared/lib/router/utils/is-local-url"),_utils1=require("../shared/lib/router/utils"),_interpolateas=require("../shared/lib/router/utils/interpolate-as");function resolveHref(e,r,t){let a,s="string"==typeof r?r:(0,_formaturl.formatWithValidation)(r);const i=s.match(/^[a-zA-Z]{1,}:\/\//),l=i?s.slice(i[0].length):s;if((l.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+s+"' passed to next/router in page: '"+e.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");const r=(0,_utils.normalizeRepeatedSlashes)(l);s=(i?i[0]:"")+r}if(!(0,_islocalurl.isLocalURL)(s))return t?[s]:s;try{a=new URL(s.startsWith("#")?e.asPath:e.pathname,"http://n")}catch(e){a=new URL("/","http://n")}try{const e=new URL(s,a);e.pathname=(0,_normalizetrailingslash.normalizePathTrailingSlash)(e.pathname);let r="";if((0,_utils1.isDynamicRoute)(e.pathname)&&e.searchParams&&t){const t=(0,_querystring.searchParamsToUrlQuery)(e.searchParams),{result:a,params:s}=(0,_interpolateas.interpolateAs)(e.pathname,e.pathname,t);a&&(r=(0,_formaturl.formatWithValidation)({pathname:a,hash:e.hash,query:(0,_omit.omit)(t,s)}))}const i=e.origin===a.origin?e.href.slice(e.origin.length):e.href;return t?[i,r||i]:i}catch(e){return t?[s]:s}}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);