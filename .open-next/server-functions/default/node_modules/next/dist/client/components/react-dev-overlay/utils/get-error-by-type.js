"use strict";function _export(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{getErrorByType:function(){return getErrorByType},useFrames:function(){return useFrames}});const _interop_require_default=require("@swc/helpers/_/_interop_require_default"),_shared=require("../shared"),_stackframe=require("./stack-frame"),_errorsource=require("../../../../shared/lib/error-source"),_react=_interop_require_default._(require("react")),useFrames=e=>{if("use"in _react.default){const r=e.frames;if("function"!=typeof r)throw Object.defineProperty(new Error("Invariant: frames must be a function when the React version has React.use. This is a bug in Next.js."),"__NEXT_ERROR_CODE",{value:"E636",enumerable:!1,configurable:!0});return _react.default.use(r())}if(!Array.isArray(e.frames))throw Object.defineProperty(new Error("Invariant: frames must be an array when the React version does not have React.use. This is a bug in Next.js."),"__NEXT_ERROR_CODE",{value:"E637",enumerable:!1,configurable:!0});return e.frames};async function getErrorByType(e,r){const{id:t,event:a}=e;switch(a.type){case _shared.ACTION_UNHANDLED_ERROR:case _shared.ACTION_UNHANDLED_REJECTION:{const e={id:t,runtime:!0,error:a.reason};if("use"in _react.default){const t={...e,frames:createMemoizedPromise((async()=>await(0,_stackframe.getOriginalStackFrames)(a.frames,(0,_errorsource.getErrorSource)(a.reason),r)))};return a.type===_shared.ACTION_UNHANDLED_ERROR&&(t.componentStackFrames=a.componentStackFrames),t}{const t={...e,frames:await(0,_stackframe.getOriginalStackFrames)(a.frames,(0,_errorsource.getErrorSource)(a.reason),r)};return a.type===_shared.ACTION_UNHANDLED_ERROR&&(t.componentStackFrames=a.componentStackFrames),t}}}throw Object.defineProperty(new Error("type system invariant violation"),"__NEXT_ERROR_CODE",{value:"E335",enumerable:!1,configurable:!0})}function createMemoizedPromise(e){const r=e();return function(){return r}}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);