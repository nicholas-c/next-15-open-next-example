"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Dialog",{enumerable:!0,get:function(){return Dialog}});const _interop_require_wildcard=require("@swc/helpers/_/_interop_require_wildcard"),_jsxruntime=require("react/jsx-runtime"),_react=_interop_require_wildcard._(require("react")),_useonclickoutside=require("../../hooks/use-on-click-outside"),_usemeasureheight=require("../../hooks/use-measure-height"),CSS_SELECTORS_TO_EXCLUDE_ON_CLICK_OUTSIDE=["[data-next-mark]","[data-issues-open]","#nextjs-dev-tools-menu","[data-nextjs-error-overlay-nav]","[data-info-popover]"],Dialog=function(e){let{children:t,type:r,className:o,onClose:i,"aria-labelledby":s,"aria-describedby":u,dialogResizerRef:n,...a}=e;const[l,d]=_react.useState(null),[c,_]=_react.useState("undefined"!=typeof document&&document.hasFocus()?"dialog":void 0),f=_react.useRef(null),[p,v]=(0,_usemeasureheight.useMeasureHeight)(f),x=_react.useCallback((e=>{d(e)}),[]);return(0,_useonclickoutside.useOnClickOutside)(l,CSS_SELECTORS_TO_EXCLUDE_ON_CLICK_OUTSIDE,(e=>(e.preventDefault(),null==i?void 0:i()))),_react.useEffect((()=>{if(null!=l)return window.addEventListener("focus",e),window.addEventListener("blur",e),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",e)};function e(){_(document.hasFocus()?"dialog":void 0)}}),[l]),_react.useEffect((()=>{const e=null==l?void 0:l.getRootNode(),t=e instanceof ShadowRoot?null==e?void 0:e.activeElement:null;return null==l||l.focus(),()=>{null==l||l.blur(),null==t||t.focus()}}),[l]),(0,_jsxruntime.jsx)("div",{ref:x,"data-nextjs-dialog":!0,tabIndex:1,role:c,"aria-labelledby":s,"aria-describedby":u,"aria-modal":"true",className:o,onKeyDown:e=>{"Escape"===e.key&&(null==i||i())},...a,children:(0,_jsxruntime.jsx)("div",{ref:n,"data-nextjs-dialog-sizer":!0,style:{height:p,transition:v?void 0:"height 250ms var(--timing-swift)"},children:(0,_jsxruntime.jsx)("div",{ref:f,children:t})})})};("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);