"use strict";function _export(e,n){for(var r in n)Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{CODE_FRAME_STYLES:function(){return CODE_FRAME_STYLES},CodeFrame:function(){return CodeFrame}});const _interop_require_default=require("@swc/helpers/_/_interop_require_default"),_jsxruntime=require("react/jsx-runtime"),_anser=_interop_require_default._(require("next/dist/compiled/anser")),_stripansi=_interop_require_default._(require("next/dist/compiled/strip-ansi")),_react=require("react"),_hotlinkedtext=require("../hot-linked-text"),_stackframe=require("../../../utils/stack-frame"),_useopenineditor=require("../../utils/use-open-in-editor"),_external=require("../../icons/external"),_file=require("../../icons/file");function CodeFrame(e){let{stackFrame:n,codeFrame:r}=e;var t;const o=(0,_react.useMemo)((()=>{const e=r.split(/\r?\n/g),n=e.map((e=>null===/^>? +\d+ +\| [ ]+/.exec((0,_stripansi.default)(e))?null:/^>? +\d+ +\| ( *)/.exec((0,_stripansi.default)(e)))).filter(Boolean).map((e=>e.pop())).reduce(((e,n)=>isNaN(e)?n.length:Math.min(e,n.length)),NaN);return n>1?e.map(((e,r)=>~(r=e.indexOf("|"))?e.substring(0,r)+e.substring(r).replace("^\\ {"+n+"}",""):e)).join("\n"):e.join("\n")}),[r]),a=(0,_react.useMemo)((()=>_anser.default.ansiToJson(o,{json:!0,use_classes:!0,remove_empty:!0})),[o]),i=(0,_useopenineditor.useOpenInEditor)({file:n.file,lineNumber:n.lineNumber,column:n.column}),s=null==n||null==(t=n.file)?void 0:t.split(".").pop();return(0,_jsxruntime.jsxs)("div",{"data-nextjs-codeframe":!0,children:[(0,_jsxruntime.jsx)("div",{className:"code-frame-header",children:(0,_jsxruntime.jsxs)("p",{className:"code-frame-link",children:[(0,_jsxruntime.jsx)("span",{className:"code-frame-icon",children:(0,_jsxruntime.jsx)(_file.FileIcon,{lang:s})}),(0,_jsxruntime.jsxs)("span",{"data-text":!0,children:[(0,_stackframe.getFrameSource)(n)," @"," ",(0,_jsxruntime.jsx)(_hotlinkedtext.HotlinkedText,{text:n.methodName})]}),(0,_jsxruntime.jsx)("button",{"aria-label":"Open in editor","data-with-open-in-editor-link-source-file":!0,onClick:i,children:(0,_jsxruntime.jsx)("span",{className:"code-frame-icon","data-icon":"right",children:(0,_jsxruntime.jsx)(_external.ExternalIcon,{width:16,height:16})})})]})}),(0,_jsxruntime.jsx)("pre",{className:"code-frame-pre",children:a.map(((e,n)=>(0,_jsxruntime.jsx)("span",{style:{color:e.fg?"var(--color-"+e.fg+")":void 0,..."bold"===e.decoration?{fontWeight:500}:"italic"===e.decoration?{fontStyle:"italic"}:void 0},children:e.content},"frame-"+n)))})]})}const CODE_FRAME_STYLES="\n  [data-nextjs-codeframe] {\n    background-color: var(--color-background-200);\n    overflow: hidden;\n    color: var(--color-gray-1000);\n    text-overflow: ellipsis;\n    border: 1px solid var(--color-gray-400);\n    border-radius: 8px;\n    font-family: var(--font-stack-monospace);\n    font-size: var(--size-12);\n    line-height: var(--size-16);\n    margin: 8px 0;\n\n    svg {\n      width: var(--size-16);\n      height: var(--size-16);\n    }\n  }\n\n  .code-frame-link,\n  .code-frame-pre {\n    padding: 12px;\n  }\n\n  .code-frame-link svg {\n    flex-shrink: 0;\n  }\n\n  .code-frame-link [data-text] {\n    display: inline-flex;\n    text-align: left;\n    margin: auto 6px;\n  }\n\n  .code-frame-pre {\n    white-space: pre-wrap;\n  }\n\n  .code-frame-header {\n    width: 100%;\n    transition: background 100ms ease-out;\n    border-radius: 8px 8px 0 0;\n    border-bottom: 1px solid var(--color-gray-400);\n  }\n\n  [data-with-open-in-editor-link-source-file] {\n    padding: 4px;\n    margin: -4px 0 -4px auto;\n    border-radius: var(--rounded-full);\n    margin-left: auto;\n\n    &:focus-visible {\n      outline: var(--focus-ring);\n      outline-offset: -2px;\n    }\n\n    &:hover {\n      background: var(--color-gray-100);\n    }\n  }\n\n  [data-nextjs-codeframe]::selection,\n  [data-nextjs-codeframe] *::selection {\n    background-color: var(--color-ansi-selection);\n  }\n\n  [data-nextjs-codeframe] *:not(a) {\n    color: inherit;\n    background-color: transparent;\n    font-family: var(--font-stack-monospace);\n  }\n\n  [data-nextjs-codeframe] > * {\n    margin: 0;\n  }\n\n  .code-frame-link {\n    display: flex;\n    margin: 0;\n    outline: 0;\n  }\n  .code-frame-link [data-icon='right'] {\n    margin-left: auto;\n  }\n\n  [data-nextjs-codeframe] div > pre {\n    overflow: hidden;\n    display: inline-block;\n  }\n\n  [data-nextjs-codeframe] svg {\n    color: var(--color-gray-900);\n  }\n";("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);