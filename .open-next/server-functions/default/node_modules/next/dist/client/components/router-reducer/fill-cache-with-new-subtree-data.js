"use strict";function _export(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{fillCacheWithNewSubTreeData:function(){return fillCacheWithNewSubTreeData},fillCacheWithNewSubTreeDataButOnlyLoading:function(){return fillCacheWithNewSubTreeDataButOnlyLoading}});const _invalidatecachebyrouterstate=require("./invalidate-cache-by-router-state"),_filllazyitemstillleafwithhead=require("./fill-lazy-items-till-leaf-with-head"),_createroutercachekey=require("./create-router-cache-key"),_segment=require("../../../shared/lib/segment");function fillCacheHelper(e,t,a,l,r){const{segmentPath:i,seedData:o,tree:u,head:c}=a;let n=e,s=t;for(let e=0;e<i.length;e+=2){const t=i[e],a=i[e+1],f=e===i.length-2,h=(0,_createroutercachekey.createRouterCacheKey)(a),d=s.parallelRoutes.get(t);if(!d)continue;let p=n.parallelRoutes.get(t);p&&p!==d||(p=new Map(d),n.parallelRoutes.set(t,p));const y=d.get(h);let g=p.get(h);if(f){if(o&&(!g||!g.lazyData||g===y)){const e=o[0],t=o[1],a=o[3];g={lazyData:null,rsc:r||e!==_segment.PAGE_SEGMENT_KEY?t:null,prefetchRsc:null,head:null,prefetchHead:null,loading:a,parallelRoutes:r&&y?new Map(y.parallelRoutes):new Map},y&&r&&(0,_invalidatecachebyrouterstate.invalidateCacheByRouterState)(g,y,u),r&&(0,_filllazyitemstillleafwithhead.fillLazyItemsTillLeafWithHead)(g,y,u,o,c,l),p.set(h,g)}}else g&&y&&(g===y&&(g={lazyData:g.lazyData,rsc:g.rsc,prefetchRsc:g.prefetchRsc,head:g.head,prefetchHead:g.prefetchHead,parallelRoutes:new Map(g.parallelRoutes),loading:g.loading},p.set(h,g)),n=g,s=y)}}function fillCacheWithNewSubTreeData(e,t,a,l){fillCacheHelper(e,t,a,l,!0)}function fillCacheWithNewSubTreeDataButOnlyLoading(e,t,a,l){fillCacheHelper(e,t,a,l,!1)}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);