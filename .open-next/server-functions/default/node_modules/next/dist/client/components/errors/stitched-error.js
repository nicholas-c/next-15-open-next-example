"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getReactStitchedError",{enumerable:!0,get:function(){return getReactStitchedError}});const _interop_require_default=require("@swc/helpers/_/_interop_require_default"),_react=_interop_require_default._(require("react")),_iserror=_interop_require_default._(require("../../../lib/is-error")),_errortelemetryutils=require("../../../lib/error-telemetry-utils"),REACT_ERROR_STACK_BOTTOM_FRAME="react-stack-bottom-frame",REACT_ERROR_STACK_BOTTOM_FRAME_REGEX=new RegExp("(at "+REACT_ERROR_STACK_BOTTOM_FRAME+" )|("+REACT_ERROR_STACK_BOTTOM_FRAME+"\\@)");function getReactStitchedError(e){const t=(0,_iserror.default)(e),r=t&&e.stack||"",_=t?e.message:"",o=r.split("\n"),a=o.findIndex((e=>REACT_ERROR_STACK_BOTTOM_FRAME_REGEX.test(e)));let u=a>=0?o.slice(0,a).join("\n"):r;const n=Object.defineProperty(new Error(_),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return Object.assign(n,e),(0,_errortelemetryutils.copyNextErrorCode)(e,n),n.stack=u,appendOwnerStack(n),n}function appendOwnerStack(e){if(!_react.default.captureOwnerStack)return;let t=e.stack||"";const r=_react.default.captureOwnerStack();r&&!1===t.endsWith(r)&&(t+=r,e.stack=t)}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);