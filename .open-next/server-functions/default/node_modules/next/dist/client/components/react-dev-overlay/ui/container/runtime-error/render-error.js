"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"RenderError",{enumerable:!0,get:function(){return RenderError}});const _jsxruntime=require("react/jsx-runtime"),_react=require("react"),_shared=require("../../../shared"),_geterrorbytype=require("../../../utils/get-error-by-type");function getErrorSignature(e){const{event:r}=e;switch(r.type){case _shared.ACTION_UNHANDLED_ERROR:case _shared.ACTION_UNHANDLED_REJECTION:return r.reason.name+"::"+r.reason.message+"::"+r.reason.stack}}const RenderError=e=>{var r;const{state:t}=e;return!!(null==(r=t.rootLayoutMissingTags)?void 0:r.length)||!!t.buildError?(0,_jsxruntime.jsx)(RenderBuildError,{...e}):(0,_jsxruntime.jsx)(RenderRuntimeError,{...e})},RenderRuntimeError=e=>{let{children:r,state:t,isAppDir:o}=e;const{errors:n}=t,[s,u]=(0,_react.useState)({}),[i,a]=(0,_react.useMemo)((()=>{let e=[],r=null;for(let t=0;t<n.length;++t){const o=n[t],{id:u}=o;if(!(u in s)){if(t>0){if(getErrorSignature(n[t-1])===getErrorSignature(o))continue}r=o;break}e.push(s[u])}return[e,r]}),[n,s]);(0,_react.useEffect)((()=>{if(null==a)return;let e=!0;return(0,_geterrorbytype.getErrorByType)(a,o).then((r=>{e&&u((e=>({...e,[r.id]:r})))})),()=>{e=!1}}),[a,o]);return r({runtimeErrors:i,totalErrorCount:i.length})},RenderBuildError=e=>{let{children:r}=e;return r({runtimeErrors:[],totalErrorCount:1})};("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);