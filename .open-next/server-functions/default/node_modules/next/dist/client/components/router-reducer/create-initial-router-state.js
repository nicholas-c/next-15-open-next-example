"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"createInitialRouterState",{enumerable:!0,get:function(){return createInitialRouterState}});const _createhreffromurl=require("./create-href-from-url"),_filllazyitemstillleafwithhead=require("./fill-lazy-items-till-leaf-with-head"),_computechangedpath=require("./compute-changed-path"),_prefetchcacheutils=require("./prefetch-cache-utils"),_routerreducertypes=require("./router-reducer-types"),_refetchinactiveparallelsegments=require("./refetch-inactive-parallel-segments"),_flightdatahelpers=require("../../flight-data-helpers");function createInitialRouterState(e){let{initialFlightData:t,initialCanonicalUrlParts:r,initialParallelRoutes:l,location:a,couldBeIntercepted:i,postponed:n,prerendered:c}=e;const o=r.join("/"),u=(0,_flightdatahelpers.getFlightDataPartsFromPath)(t[0]),{tree:s,seedData:h,head:d}=u;var p;const f={lazyData:null,rsc:null==h?void 0:h[1],prefetchRsc:null,head:null,prefetchHead:null,parallelRoutes:l,loading:null!=(p=null==h?void 0:h[3])?p:null},m=a?(0,_createhreffromurl.createHrefFromUrl)(a):o;(0,_refetchinactiveparallelsegments.addRefreshMarkerToActiveParallelSegments)(s,m);const g=new Map;var _;null!==l&&0!==l.size||(0,_filllazyitemstillleafwithhead.fillLazyItemsTillLeafWithHead)(f,void 0,s,h,d,void 0);const v={tree:s,cache:f,prefetchCache:g,pushRef:{pendingPush:!1,mpaNavigation:!1,preserveCustomHistoryState:!0},focusAndScrollRef:{apply:!1,onlyHashChange:!1,hashFragment:null,segmentPaths:[]},canonicalUrl:m,nextUrl:null!=(_=(0,_computechangedpath.extractPathFromFlightRouterState)(s)||(null==a?void 0:a.pathname))?_:null};if("development"!==process.env.NODE_ENV&&a){const e=new URL(""+a.pathname+a.search,a.origin);(0,_prefetchcacheutils.createSeededPrefetchCacheEntry)({url:e,data:{flightData:[u],canonicalUrl:void 0,couldBeIntercepted:!!i,prerendered:c,postponed:n,staleTime:-1},tree:v.tree,prefetchCache:v.prefetchCache,nextUrl:v.nextUrl,kind:c?_routerreducertypes.PrefetchKind.FULL:_routerreducertypes.PrefetchKind.AUTO})}return v}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);