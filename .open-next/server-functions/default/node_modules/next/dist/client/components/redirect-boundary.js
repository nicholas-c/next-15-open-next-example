"use strict";function _export(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{RedirectBoundary:function(){return RedirectBoundary},RedirectErrorBoundary:function(){return RedirectErrorBoundary}});const _interop_require_wildcard=require("@swc/helpers/_/_interop_require_wildcard"),_jsxruntime=require("react/jsx-runtime"),_react=_interop_require_wildcard._(require("react")),_navigation=require("./navigation"),_redirect=require("./redirect"),_redirecterror=require("./redirect-error");function HandleRedirect(e){let{redirect:r,reset:t,redirectType:i}=e;const o=(0,_navigation.useRouter)();return(0,_react.useEffect)((()=>{_react.default.startTransition((()=>{i===_redirecterror.RedirectType.push?o.push(r,{}):o.replace(r,{}),t()}))}),[r,i,t,o]),null}class RedirectErrorBoundary extends _react.default.Component{static getDerivedStateFromError(e){if((0,_redirecterror.isRedirectError)(e)){return{redirect:(0,_redirect.getURLFromRedirectError)(e),redirectType:(0,_redirect.getRedirectTypeFromError)(e)}}throw e}render(){const{redirect:e,redirectType:r}=this.state;return null!==e&&null!==r?(0,_jsxruntime.jsx)(HandleRedirect,{redirect:e,redirectType:r,reset:()=>this.setState({redirect:null})}):this.props.children}constructor(e){super(e),this.state={redirect:null,redirectType:null}}}function RedirectBoundary(e){let{children:r}=e;const t=(0,_navigation.useRouter)();return(0,_jsxruntime.jsx)(RedirectErrorBoundary,{router:t,children:r})}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);