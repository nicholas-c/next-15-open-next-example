"use strict";function _export(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{computeChangedPath:function(){return computeChangedPath},extractPathFromFlightRouterState:function(){return extractPathFromFlightRouterState},getSelectedParams:function(){return getSelectedParams}});const _interceptionroutes=require("../../../server/lib/interception-routes"),_segment=require("../../../shared/lib/segment"),_matchsegments=require("../match-segments"),removeLeadingSlash=e=>"/"===e[0]?e.slice(1):e,segmentToPathname=e=>"string"==typeof e?"children"===e?"":e:e[1];function normalizeSegments(e){return e.reduce(((e,t)=>""===(t=removeLeadingSlash(t))||(0,_segment.isGroupSegment)(t)?e:e+"/"+t),"")||"/"}function extractPathFromFlightRouterState(e){const t=Array.isArray(e[0])?e[0][1]:e[0];if(t===_segment.DEFAULT_SEGMENT_KEY||_interceptionroutes.INTERCEPTION_ROUTE_MARKERS.some((e=>t.startsWith(e))))return;if(t.startsWith(_segment.PAGE_SEGMENT_KEY))return"";const r=[segmentToPathname(t)];var n;const o=null!=(n=e[1])?n:{},s=o.children?extractPathFromFlightRouterState(o.children):void 0;if(void 0!==s)r.push(s);else for(const[e,t]of Object.entries(o)){if("children"===e)continue;const n=extractPathFromFlightRouterState(t);void 0!==n&&r.push(n)}return normalizeSegments(r)}function computeChangedPathImpl(e,t){const[r,n]=e,[o,s]=t,a=segmentToPathname(r),i=segmentToPathname(o);if(_interceptionroutes.INTERCEPTION_ROUTE_MARKERS.some((e=>a.startsWith(e)||i.startsWith(e))))return"";var u;if(!(0,_matchsegments.matchSegment)(r,o))return null!=(u=extractPathFromFlightRouterState(t))?u:"";for(const e in n)if(s[e]){const t=computeChangedPathImpl(n[e],s[e]);if(null!==t)return segmentToPathname(o)+"/"+t}return null}function computeChangedPath(e,t){const r=computeChangedPathImpl(e,t);return null==r||"/"===r?r:normalizeSegments(r.split("/"))}function getSelectedParams(e,t){void 0===t&&(t={});const r=e[1];for(const e of Object.values(r)){const r=e[0],n=Array.isArray(r),o=n?r[1]:r;if(!o||o.startsWith(_segment.PAGE_SEGMENT_KEY))continue;n&&("c"===r[2]||"oc"===r[2])?t[r[0]]=r[1].split("/"):n&&(t[r[0]]=r[1]),t=getSelectedParams(e,t)}return t}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);