"use strict";function _export(e,n){for(var t in n)Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{TERMINAL_STYLES:function(){return TERMINAL_STYLES},Terminal:function(){return Terminal}});const _interop_require_default=require("@swc/helpers/_/_interop_require_default"),_interop_require_wildcard=require("@swc/helpers/_/_interop_require_wildcard"),_jsxruntime=require("react/jsx-runtime"),_anser=_interop_require_default._(require("next/dist/compiled/anser")),_react=_interop_require_wildcard._(require("react")),_hotlinkedtext=require("../hot-linked-text"),_editorlink=require("./editor-link"),_external=require("../../icons/external"),_stackframe=require("../../../utils/stack-frame"),_useopenineditor=require("../../utils/use-open-in-editor"),_file=require("../../icons/file");function getFile(e){const n=e.shift();if(!n)return null;const[t,r,i]=n.split(":",3),l=Number(r),o=Number(i),s=!Number.isNaN(l)&&!Number.isNaN(o);return{fileName:s?t:n,location:s?{line:l,column:o}:void 0}}function getImportTraceFiles(e){if(e.some((e=>/ReactServerComponentsError:/.test(e)))||e.some((e=>/Import trace for requested module:/.test(e)))){const n=[];for(;/.+\..+/.test(e[e.length-1])&&!e[e.length-1].includes(":");){const t=e.pop().trim();n.unshift(t)}return n}return[]}function getEditorLinks(e){const n=e.split("\n"),t=getFile(n),r=getImportTraceFiles(n);return{file:t,source:n.join("\n"),importTraceFiles:r}}const Terminal=function(e){let{content:n}=e;var t,r,i,l,o;const{file:s,source:a,importTraceFiles:u}=_react.useMemo((()=>getEditorLinks(n)),[n]),c=_react.useMemo((()=>_anser.default.ansiToJson(a,{json:!0,use_classes:!0,remove_empty:!0})),[a]);var d,m;const _=(0,_useopenineditor.useOpenInEditor)({file:null==s?void 0:s.fileName,lineNumber:null!=(d=null==s||null==(t=s.location)?void 0:t.line)?d:1,column:null!=(m=null==s||null==(r=s.location)?void 0:r.column)?m:0});var p,f,x;const j={file:null!=(p=null==s?void 0:s.fileName)?p:null,methodName:"",arguments:[],lineNumber:null!=(f=null==s||null==(i=s.location)?void 0:i.line)?f:null,column:null!=(x=null==s||null==(l=s.location)?void 0:l.column)?x:null},v=null==j||null==(o=j.file)?void 0:o.split(".").pop();return(0,_jsxruntime.jsxs)("div",{"data-nextjs-codeframe":!0,children:[(0,_jsxruntime.jsx)("div",{className:"code-frame-header",children:(0,_jsxruntime.jsxs)("div",{className:"code-frame-link",children:[(0,_jsxruntime.jsx)("span",{className:"code-frame-icon",children:(0,_jsxruntime.jsx)(_file.FileIcon,{lang:v})}),(0,_jsxruntime.jsx)("span",{"data-text":!0,children:(0,_stackframe.getFrameSource)(j)}),(0,_jsxruntime.jsx)("button",{"aria-label":"Open in editor","data-with-open-in-editor-link-source-file":!0,onClick:_,children:(0,_jsxruntime.jsx)("span",{className:"code-frame-icon","data-icon":"right",children:(0,_jsxruntime.jsx)(_external.ExternalIcon,{width:16,height:16})})})]})}),(0,_jsxruntime.jsxs)("pre",{className:"code-frame-pre",children:[c.map(((e,n)=>(0,_jsxruntime.jsx)("span",{style:{color:e.fg?"var(--color-"+e.fg+")":void 0,..."bold"===e.decoration?{fontWeight:500}:"italic"===e.decoration?{fontStyle:"italic"}:void 0},children:(0,_jsxruntime.jsx)(_hotlinkedtext.HotlinkedText,{text:e.content})},"terminal-entry-"+n))),u.map((e=>(0,_jsxruntime.jsx)(_editorlink.EditorLink,{isSourceFile:!1,file:e},e)))]})]})},TERMINAL_STYLES="\n  [data-nextjs-terminal]::selection,\n  [data-nextjs-terminal] *::selection {\n    background-color: var(--color-ansi-selection);\n  }\n\n  [data-nextjs-terminal] * {\n    color: inherit;\n    background-color: transparent;\n    font-family: var(--font-stack-monospace);\n  }\n\n  [data-nextjs-terminal] > div > p {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    cursor: pointer;\n    margin: 0;\n  }\n  [data-nextjs-terminal] > div > p:hover {\n    text-decoration: underline dotted;\n  }\n  [data-nextjs-terminal] div > pre {\n    overflow: hidden;\n    display: inline-block;\n  }\n";("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);