"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getNextErrorFeedbackMiddleware",{enumerable:!0,get:function(){return getNextErrorFeedbackMiddleware}});const _errorfeedback=require("../../../../telemetry/events/error-feedback"),_middlewareresponse=require("./middleware-response");function getNextErrorFeedbackMiddleware(e){return async function(r,t,o){const{pathname:d,searchParams:s}=new URL("http://n"+r.url);if("/__nextjs_error_feedback"!==d)return o();try{const r=s.get("errorCode"),o=s.get("wasHelpful");return r&&o?(await e.record((0,_errorfeedback.eventErrorFeedback)({errorCode:r,wasHelpful:"true"===o})),_middlewareresponse.middlewareResponse.noContent(t)):_middlewareresponse.middlewareResponse.badRequest(t)}catch(e){return _middlewareresponse.middlewareResponse.internalServerError(t)}}}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);