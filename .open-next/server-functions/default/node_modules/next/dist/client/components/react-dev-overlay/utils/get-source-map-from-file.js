"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getSourceMapFromFile",{enumerable:!0,get:function(){return getSourceMapFromFile}});const _interop_require_default=require("@swc/helpers/_/_interop_require_default"),_promises=_interop_require_default._(require("fs/promises")),_path=_interop_require_default._(require("path")),_url=_interop_require_default._(require("url")),_datauritobuffer=_interop_require_default._(require("next/dist/compiled/data-uri-to-buffer")),_getsourcemapurl=require("./get-source-map-url");async function getSourceMapFromFile(e){let r;e=e.startsWith("file://")?_url.default.fileURLToPath(e):e;try{r=await _promises.default.readFile(e,"utf-8")}catch(r){throw Object.defineProperty(new Error("Failed to read file contents of "+e+".",{cause:r}),"__NEXT_ERROR_CODE",{value:"E466",enumerable:!1,configurable:!0})}const t=(0,_getsourcemapurl.getSourceMapUrl)(r);if(!t)return;if(t.startsWith("data:")){let r;try{r=(0,_datauritobuffer.default)(t)}catch(r){throw Object.defineProperty(new Error("Failed to parse source map URL for "+e+".",{cause:r}),"__NEXT_ERROR_CODE",{value:"E199",enumerable:!1,configurable:!0})}if("application/json"!==r.type)throw Object.defineProperty(new Error("Unknown source map type for "+e+": "+r.typeFull+"."),"__NEXT_ERROR_CODE",{value:"E113",enumerable:!1,configurable:!0});try{return JSON.parse(r.toString())}catch(r){throw Object.defineProperty(new Error("Failed to parse source map for "+e+".",{cause:r}),"__NEXT_ERROR_CODE",{value:"E318",enumerable:!1,configurable:!0})}}const o=_path.default.resolve(_path.default.dirname(e),decodeURIComponent(t));try{const e=await _promises.default.readFile(o,"utf-8");return JSON.parse(e.toString())}catch(e){throw Object.defineProperty(new Error("Failed to parse source map "+o+".",{cause:e}),"__NEXT_ERROR_CODE",{value:"E220",enumerable:!1,configurable:!0})}}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);