"use strict";function _export(r,e){for(var t in e)Object.defineProperty(r,t,{enumerable:!0,get:e[t]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{ErrorBoundary:function(){return ErrorBoundary},ErrorBoundaryHandler:function(){return ErrorBoundaryHandler},GlobalError:function(){return GlobalError},default:function(){return _default}});const _interop_require_default=require("@swc/helpers/_/_interop_require_default"),_jsxruntime=require("react/jsx-runtime"),_react=_interop_require_default._(require("react")),_navigationuntracked=require("./navigation-untracked"),_isnextroutererror=require("./is-next-router-error"),_navfailurehandler=require("./nav-failure-handler"),_workasyncstorageexternal=require("../../server/app-render/work-async-storage.external"),styles={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}};function HandleISRError(r){let{error:e}=r;const t=_workasyncstorageexternal.workAsyncStorage.getStore();if((null==t?void 0:t.isRevalidate)||(null==t?void 0:t.isStaticGeneration))throw console.error(e),e;return null}class ErrorBoundaryHandler extends _react.default.Component{static getDerivedStateFromError(r){if((0,_isnextroutererror.isNextRouterError)(r))throw r;return{error:r}}static getDerivedStateFromProps(r,e){const{error:t}=e;return process.env.__NEXT_APP_NAV_FAIL_HANDLING&&t&&(0,_navfailurehandler.handleHardNavError)(t)||r.pathname!==e.previousPathname&&e.error?{error:null,previousPathname:r.pathname}:{error:e.error,previousPathname:r.pathname}}render(){return this.state.error?(0,_jsxruntime.jsxs)(_jsxruntime.Fragment,{children:[(0,_jsxruntime.jsx)(HandleISRError,{error:this.state.error}),this.props.errorStyles,this.props.errorScripts,(0,_jsxruntime.jsx)(this.props.errorComponent,{error:this.state.error,reset:this.reset})]}):this.props.children}constructor(r){super(r),this.reset=()=>{this.setState({error:null})},this.state={error:null,previousPathname:this.props.pathname}}}function GlobalError(r){let{error:e}=r;const t=null==e?void 0:e.digest;return(0,_jsxruntime.jsxs)("html",{id:"__next_error__",children:[(0,_jsxruntime.jsx)("head",{}),(0,_jsxruntime.jsxs)("body",{children:[(0,_jsxruntime.jsx)(HandleISRError,{error:e}),(0,_jsxruntime.jsx)("div",{style:styles.error,children:(0,_jsxruntime.jsxs)("div",{children:[(0,_jsxruntime.jsxs)("h2",{style:styles.text,children:["Application error: a ",t?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",t?"server logs":"browser console"," for more information)."]}),t?(0,_jsxruntime.jsx)("p",{style:styles.text,children:"Digest: "+t}):null]})})]})]})}const _default=GlobalError;function ErrorBoundary(r){let{errorComponent:e,errorStyles:t,errorScripts:o,children:n}=r;const s=(0,_navigationuntracked.useUntrackedPathname)();return e?(0,_jsxruntime.jsx)(ErrorBoundaryHandler,{pathname:s,errorComponent:e,errorStyles:t,errorScripts:o,children:n}):(0,_jsxruntime.jsx)(_jsxruntime.Fragment,{children:n})}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);