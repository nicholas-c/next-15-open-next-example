"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"handleMutable",{enumerable:!0,get:function(){return handleMutable}});const _computechangedpath=require("./compute-changed-path");function isNotUndefined(e){return void 0!==e}function handleMutable(e,t){var n;const a=null==(n=t.shouldScroll)||n;let o=e.nextUrl;if(isNotUndefined(t.patchedTree)){const n=(0,_computechangedpath.computeChangedPath)(e.tree,t.patchedTree);n?o=n:o||(o=e.canonicalUrl)}var r;return{canonicalUrl:isNotUndefined(t.canonicalUrl)?t.canonicalUrl===e.canonicalUrl?e.canonicalUrl:t.canonicalUrl:e.canonicalUrl,pushRef:{pendingPush:isNotUndefined(t.pendingPush)?t.pendingPush:e.pushRef.pendingPush,mpaNavigation:isNotUndefined(t.mpaNavigation)?t.mpaNavigation:e.pushRef.mpaNavigation,preserveCustomHistoryState:isNotUndefined(t.preserveCustomHistoryState)?t.preserveCustomHistoryState:e.pushRef.preserveCustomHistoryState},focusAndScrollRef:{apply:!!a&&(!!isNotUndefined(null==t?void 0:t.scrollableSegments)||e.focusAndScrollRef.apply),onlyHashChange:t.onlyHashChange||!1,hashFragment:a?t.hashFragment&&""!==t.hashFragment?decodeURIComponent(t.hashFragment.slice(1)):e.focusAndScrollRef.hashFragment:null,segmentPaths:a?null!=(r=null==t?void 0:t.scrollableSegments)?r:e.focusAndScrollRef.segmentPaths:[]},cache:t.cache?t.cache:e.cache,prefetchCache:t.prefetchCache?t.prefetchCache:e.prefetchCache,tree:isNotUndefined(t.patchedTree)?t.patchedTree:e.tree,nextUrl:o}}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);