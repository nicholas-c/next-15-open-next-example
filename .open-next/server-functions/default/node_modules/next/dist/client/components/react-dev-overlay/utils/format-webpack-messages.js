"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return formatWebpackMessages}});const _interop_require_default=require("@swc/helpers/_/_interop_require_default"),_stripansi=_interop_require_default._(require("next/dist/compiled/strip-ansi")),friendlySyntaxErrorLabel="Syntax error:",WEBPACK_BREAKING_CHANGE_POLYFILLS="\n\nBREAKING CHANGE: webpack < 5 used to include polyfills for node.js core modules by default.";function isLikelyASyntaxError(e){return(0,_stripansi.default)(e).includes(friendlySyntaxErrorLabel)}let hadMissingSassError=!1;function formatMessage(e,r,t){if("object"==typeof e&&e.message){const s=e.moduleTrace&&e.moduleTrace.filter((e=>!/next-(middleware|client-pages|route|edge-function)-loader\.js/.test(e.originName)));let o=e.message;const n=o.indexOf(WEBPACK_BREAKING_CHANGE_POLYFILLS);n>=0&&(o=o.slice(0,n)),e=(e.moduleName?(0,_stripansi.default)(e.moduleName)+"\n":"")+(e.file?(0,_stripansi.default)(e.file)+"\n":"")+o+(e.details&&r?"\n"+e.details:"")+(s&&s.length?(t||"\n\nImport trace for requested module:")+s.map((e=>"\n"+e.moduleName)).join(""):"")+(e.stack&&r?"\n"+e.stack:"")}let s=e.split("\n");if(s=s.filter((e=>!/Module [A-z ]+\(from/.test(e))),s=s.map((e=>{const r=/Line (\d+):(?:(\d+):)?\s*Parsing error: (.+)$/.exec(e);if(!r)return e;const[,t,s,o]=r;return friendlySyntaxErrorLabel+" "+o+" ("+t+":"+s+")"})),e=s.join("\n"),s=(e=(e=(e=(e=e.replace(/SyntaxError\s+\((\d+):(\d+)\)\s*(.+?)\n/g,friendlySyntaxErrorLabel+" $3 ($1:$2)\n")).replace(/^.*export '(.+?)' was not found in '(.+?)'.*$/gm,"Attempted import error: '$1' is not exported from '$2'.")).replace(/^.*export 'default' \(imported as '(.+?)'\) was not found in '(.+?)'.*$/gm,"Attempted import error: '$2' does not contain a default export (imported as '$1').")).replace(/^.*export '(.+?)' \(imported as '(.+?)'\) was not found in '(.+?)'.*$/gm,"Attempted import error: '$1' is not exported from '$3' (imported as '$2').")).split("\n"),s.length>2&&""===s[1].trim()&&s.splice(1,1),s[1]&&s[1].startsWith("Module not found: ")&&(s=[s[0],s[1].replace("Error: ","").replace("Module not found: Cannot find file:","Cannot find file:"),...s.slice(2)]),s[1]&&s[1].match(/Cannot find module.+sass/)){const e=s[0].split("!");s[0]=e[e.length-1],s[1]="To use Next.js' built-in Sass support, you first need to install `sass`.\n",s[1]+="Run `npm i sass` or `yarn add sass` inside your workspace.\n",s[1]+="\nLearn more: https://nextjs.org/docs/messages/install-sass",s=s.slice(0,2),hadMissingSassError=!0}else hadMissingSassError&&e.match(/(sass-loader|resolve-url-loader: CSS error)/)&&(s=[]);return r||(e=s.join("\n"),s=(e=(e=(e=e.replace(/^\s*at\s((?!webpack:).)*:\d+:\d+[\s)]*(\n|$)/gm,"")).replace(/^\s*at\s<anonymous>(\n|$)/gm,"")).replace(/File was processed with these loaders:\n(.+[\\/](next[\\/]dist[\\/].+|@next[\\/]react-refresh-utils[\\/]loader)\.js\n)*You may need an additional loader to handle the result of these loaders.\n/g,"")).split("\n")),s=s.filter(((e,r,t)=>0===r||""!==e.trim()||e.trim()!==t[r-1].trim())),(e=s.join("\n")).trim()}function formatWebpackMessages(e,r){const t=e.errors.map((e=>{const t=e.message.includes("An error occurred in `next/font`.");return formatMessage(e,t||r)})),s=e.warnings.map((e=>formatMessage(e,r)));let o=-1;for(let e=0;e<t.length;e++){if(t[e].includes("ReactServerComponentsError")){o=e;break}}if(-1!==o){const e=t.splice(o,1);t.unshift(e[0])}const n={...e,errors:t,warnings:s};return!r&&n.errors.some(isLikelyASyntaxError)&&(n.errors=n.errors.filter(isLikelyASyntaxError),n.warnings=[]),n}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default);