/**
 * @license React
 * react-refresh-babel.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
"use strict";"production"!==process.env.NODE_ENV&&function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof e.env){var n=e.env();if("development"!==n&&!t.skipEnvCheck)throw new Error('React Refresh Babel transform should only be enabled in development environment. Instead, the environment is: "'+n+'". If you want to override this check, pass {skipEnvCheck: true} as plugin options.')}var a=e.types,r=a.identifier(t.refreshReg||"$RefreshReg$"),i=a.identifier(t.refreshSig||"$RefreshSig$"),s=new Map;function o(e,t){var n=e.scope.generateUidIdentifier("c");return s.has(e)||s.set(e,[]),s.get(e).push({handle:n,persistentID:t}),n}function c(e){return"string"==typeof e&&e[0]>="A"&&e[0]<="Z"}function u(e,t,n){var a=t.node;switch(a.type){case"Identifier":return!!c(a.name)&&(n(e,a,null),!0);case"FunctionDeclaration":return n(e,a.id,null),!0;case"ArrowFunctionExpression":return"ArrowFunctionExpression"!==a.body.type&&(n(e,a,t),!0);case"FunctionExpression":return n(e,a,t),!0;case"CallExpression":var r=t.get("arguments");if(void 0===r||0===r.length)return!1;var i=t.get("callee");switch(i.node.type){case"MemberExpression":case"Identifier":return!!u(e+"$"+i.getSource(),r[0],n)&&(n(e,a,t),!0);default:return!1}case"VariableDeclarator":var s=a.init;if(null===s)return!1;var o=a.id.name;if(!c(o))return!1;switch(s.type){case"ArrowFunctionExpression":case"FunctionExpression":case"TaggedTemplateExpression":break;case"CallExpression":var l=s.callee,p=l.type;if("Import"===p)return!1;if("Identifier"===p){if(0===l.name.indexOf("require"))return!1;if(0===l.name.indexOf("import"))return!1}break;default:return!1}var f=t.get("init");if(u(e,f,n))return!0;var d=t.scope.getBinding(o);if(void 0===d)return;for(var h=!1,v=d.referencePaths,m=0;m<v.length;m++){var g=v[m];if(!g.node||"JSXIdentifier"===g.node.type||"Identifier"===g.node.type){var x=g.parent;if("JSXOpeningElement"===x.type)h=!0;else if("CallExpression"===x.type){var y=x.callee,E=void 0;switch(y.type){case"Identifier":E=y.name;break;case"MemberExpression":E=y.property.name}switch(E){case"createElement":case"jsx":case"jsxDEV":case"jsxs":h=!0}}if(h)return n(e,s,f),!0}}}return!1}function l(e){switch(e){case"useState":case"React.useState":case"useReducer":case"React.useReducer":case"useEffect":case"React.useEffect":case"useLayoutEffect":case"React.useLayoutEffect":case"useMemo":case"React.useMemo":case"useCallback":case"React.useCallback":case"useRef":case"React.useRef":case"useContext":case"React.useContext":case"useImperativeHandle":case"React.useImperativeHandle":case"useDebugValue":case"React.useDebugValue":return!0;default:return!1}}function p(e){var t=y.get(e);return void 0===t?null:{key:t.map((function(e){return e.name+"{"+e.key+"}"})).join("\n"),customHooks:t.filter((function(e){return!l(e.name)})).map((function(e){return a.cloneDeep(e.callee)}))}}var f=new WeakMap;function d(e){var t=e.hub.file,n=f.get(t);if(void 0!==n)return n;n=!1;for(var a=t.ast.comments,r=0;r<a.length;r++){if(-1!==a[r].value.indexOf("@refresh reset")){n=!0;break}}return f.set(t,n),n}function h(e,n,r){var i=n.key,s=n.customHooks,o=d(r.path),c=[];s.forEach((function(e){var t;switch(e.type){case"MemberExpression":"Identifier"===e.object.type&&(t=e.object.name);break;case"Identifier":t=e.name}r.hasBinding(t)?c.push(e):o=!0}));var u=i;"function"!=typeof require||t.emitFullSignatures||(u=require("crypto").createHash("sha1").update(i).digest("base64"));var l=[e,a.stringLiteral(u)];return(o||c.length>0)&&l.push(a.booleanLiteral(o)),c.length>0&&l.push(a.functionExpression(null,[],a.blockStatement([a.returnStatement(a.arrayExpression(c))]))),l}function v(e){for(var t=[];;){if(!e)return t;var n=e.parentPath;if(!n)return t;if("AssignmentExpression"!==n.node.type||e.node!==n.node.right){if("CallExpression"!==n.node.type||e.node===n.node.callee)return t;t.push(n),e=n}else e=n}}var m=new WeakSet,g=new WeakSet,x=new WeakSet,y=new WeakMap,E={CallExpression:function(e){var t=e.node.callee,n=null;switch(t.type){case"Identifier":n=t.name;break;case"MemberExpression":n=t.property.name}if(null!==n&&/^use[A-Z]/.test(n)){var a=e.scope.getFunctionParent();if(null!==a){var r=a.block;y.has(r)||y.set(r,[]);var i=y.get(r),s="";"VariableDeclarator"===e.parent.type&&(s=e.parentPath.get("id").getSource());var o=e.get("arguments");"useState"===n&&o.length>0?s+="("+o[0].getSource()+")":"useReducer"===n&&o.length>1&&(s+="("+o[1].getSource()+")"),i.push({callee:e.node.callee,name:n,key:s})}}}};return{visitor:{ExportDefaultDeclaration:function(e){var t=e.node,n=t.declaration,r=e.get("declaration");if("CallExpression"===n.type&&!m.has(t)){m.add(t);var i="%default%",s=e.parentPath;u(i,r,(function(e,t,n){if(null!==n){var r=o(s,e);n.replaceWith(a.assignmentExpression("=",r,t))}}))}},FunctionDeclaration:{enter:function(e){var t,n,r=e.node,i="";switch(e.parent.type){case"Program":n=e,t=e.parentPath;break;case"TSModuleBlock":t=(n=e).parentPath.parentPath;break;case"ExportNamedDeclaration":case"ExportDefaultDeclaration":n=e.parentPath,t=n.parentPath;break;default:return}if("TSModuleBlock"===e.parent.type||"ExportNamedDeclaration"===e.parent.type)for(;"Program"!==t.type;){if("TSModuleDeclaration"===t.type){if("Program"!==t.parentPath.type&&"ExportNamedDeclaration"!==t.parentPath.type)return;i=t.node.id.name+"$"+i}t=t.parentPath}var s=r.id;if(null!==s){var l=s.name;if(c(l))if(!m.has(r))m.add(r),u(i+l,e,(function(e,r){var i=o(t,e);n.insertAfter(a.expressionStatement(a.assignmentExpression("=",i,r)))}))}},exit:function(e){var t=e.node,n=t.id;if(null!==n){var r=p(t);if(null!==r&&!g.has(t)){g.add(t);var s=e.scope.generateUidIdentifier("_s");e.scope.parent.push({id:s,init:a.callExpression(i,[])}),e.get("body").unshiftContainer("body",a.expressionStatement(a.callExpression(s,[])));var o=null;e.find((function(e){if(e.parentPath.isBlock())return o=e,!0})),null!==o&&o.insertAfter(a.expressionStatement(a.callExpression(s,h(n,r,o.scope))))}}}},"ArrowFunctionExpression|FunctionExpression":{exit:function(e){var t=e.node,n=p(t);if(null!==n&&!g.has(t)){g.add(t);var r=e.scope.generateUidIdentifier("_s");if(e.scope.parent.push({id:r,init:a.callExpression(i,[])}),"BlockStatement"!==e.node.body.type&&(e.node.body=a.blockStatement([a.returnStatement(e.node.body)])),e.get("body").unshiftContainer("body",a.expressionStatement(a.callExpression(r,[]))),"VariableDeclarator"===e.parent.type){var s=null;if(e.find((function(e){if(e.parentPath.isBlock())return s=e,!0})),null===s)return;s.insertAfter(a.expressionStatement(a.callExpression(r,h(e.parent.id,n,s.scope))))}else{[e].concat(v(e)).forEach((function(e){e.replaceWith(a.callExpression(r,h(e.node,n,e.scope)))}))}}}},VariableDeclaration:function(e){var t,n,r=e.node,i="";switch(e.parent.type){case"Program":n=e,t=e.parentPath;break;case"TSModuleBlock":t=(n=e).parentPath.parentPath;break;case"ExportNamedDeclaration":case"ExportDefaultDeclaration":n=e.parentPath,t=n.parentPath;break;default:return}if("TSModuleBlock"===e.parent.type||"ExportNamedDeclaration"===e.parent.type)for(;"Program"!==t.type;){if("TSModuleDeclaration"===t.type){if("Program"!==t.parentPath.type&&"ExportNamedDeclaration"!==t.parentPath.type)return;i=t.node.id.name+"$"+i}t=t.parentPath}if(!m.has(r)){m.add(r);var s=e.get("declarations");if(1===s.length){var c=s[0];u(i+c.node.id.name,c,(function(e,r,i){if(null!==i){var s=o(t,e);"VariableDeclarator"===i.parent.type?n.insertAfter(a.expressionStatement(a.assignmentExpression("=",s,c.node.id))):i.replaceWith(a.assignmentExpression("=",s,r))}}))}}},Program:{enter:function(e){e.traverse(E)},exit:function(e){var t=s.get(e);if(void 0!==t){var n=e.node;if(!x.has(n)){x.add(n),s.delete(e);var i=[];e.pushContainer("body",a.variableDeclaration("var",i)),t.forEach((function(t){var n=t.handle,s=t.persistentID;e.pushContainer("body",a.expressionStatement(a.callExpression(r,[n,a.stringLiteral(s)]))),i.push(a.variableDeclarator(n))}))}}}}}}}module.exports=e}();