(()=>{var t={590:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detector=void 0;const i=n(275),r=Object.keys(i.typeHandlers),o={56:"psd",66:"bmp",68:"dds",71:"gif",73:"tiff",77:"tiff",82:"webp",105:"icns",137:"png",255:"jpg"};function s(t){const e=t[0];if(e in o){const n=o[e];if(n&&i.typeHandlers[n].validate(t))return n}const n=e=>i.typeHandlers[e].validate(t);return r.find(n)}e.detector=s},751:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.types=e.setConcurrency=e.disableTypes=e.disableFS=e.imageSize=void 0;const i=n(147),r=n(17),o=n(927),s=n(275),c=n(590),a=524288,d=new o.default({concurrency:100,autostart:!0}),u={disabledFS:!1,disabledTypes:[]};function h(t,e){const n=(0,c.detector)(t);if(void 0!==n){if(u.disabledTypes.indexOf(n)>-1)throw new TypeError("disabled file type: "+n);if(n in s.typeHandlers){const i=s.typeHandlers[n].calculate(t,e);if(void 0!==i)return i.type=i.type??n,i}}throw new TypeError("unsupported file type: "+n+" (file: "+e+")")}async function l(t){const e=await i.promises.open(t,"r");try{const{size:t}=await e.stat();if(t<=0)throw new Error("Empty file");const n=Math.min(t,a),i=new Uint8Array(n);return await e.read(i,0,n,0),i}finally{await e.close()}}function f(t){const e=i.openSync(t,"r");try{const{size:t}=i.fstatSync(e);if(t<=0)throw new Error("Empty file");const n=Math.min(t,a),r=new Uint8Array(n);return i.readSync(e,r,0,n,0),r}finally{i.closeSync(e)}}function p(t,e){if(t instanceof Uint8Array)return h(t);if("string"!=typeof t||u.disabledFS)throw new TypeError("invalid invocation. input should be a Uint8Array");const n=r.resolve(t);if("function"!=typeof e){return h(f(n),n)}d.push((()=>l(n).then((t=>process.nextTick(e,null,h(t,n)))).catch(e)))}t.exports=e=p,e.default=p,e.imageSize=p;const g=t=>{u.disabledFS=t};e.disableFS=g;const y=t=>{u.disabledTypes=t};e.disableTypes=y;const I=t=>{d.concurrency=t};e.setConcurrency=I,e.types=Object.keys(s.typeHandlers)},683:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BMP=void 0;const i=n(823);e.BMP={validate:t=>"BM"===(0,i.toUTF8String)(t,0,2),calculate:t=>({height:Math.abs((0,i.readInt32LE)(t,22)),width:(0,i.readUInt32LE)(t,18)})}},827:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CUR=void 0;const i=n(345),r=n(823),o=2;e.CUR={validate(t){const e=(0,r.readUInt16LE)(t,0),n=(0,r.readUInt16LE)(t,4);if(0!==e||0===n)return!1;return(0,r.readUInt16LE)(t,2)===o},calculate:t=>i.ICO.calculate(t)}},387:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DDS=void 0;const i=n(823);e.DDS={validate:t=>542327876===(0,i.readUInt32LE)(t,0),calculate:t=>({height:(0,i.readUInt32LE)(t,12),width:(0,i.readUInt32LE)(t,16)})}},589:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GIF=void 0;const i=n(823),r=/^GIF8[79]a/;e.GIF={validate:t=>r.test((0,i.toUTF8String)(t,0,6)),calculate:t=>({height:(0,i.readUInt16LE)(t,8),width:(0,i.readUInt16LE)(t,6)})}},665:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HEIF=void 0;const i=n(823),r={avif:"avif",mif1:"heif",msf1:"heif",heic:"heic",heix:"heic",hevc:"heic",hevx:"heic"};e.HEIF={validate(t){const e=(0,i.toUTF8String)(t,4,8),n=(0,i.toUTF8String)(t,8,12);return"ftyp"===e&&n in r},calculate(t){const e=(0,i.findBox)(t,"meta",0),n=e&&(0,i.findBox)(t,"iprp",e.offset+12),r=n&&(0,i.findBox)(t,"ipco",n.offset+8),o=r&&(0,i.findBox)(t,"ispe",r.offset+8);if(o)return{height:(0,i.readUInt32BE)(t,o.offset+16),width:(0,i.readUInt32BE)(t,o.offset+12),type:(0,i.toUTF8String)(t,8,12)};throw new TypeError("Invalid HEIF, no size found")}}},797:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ICNS=void 0;const i=n(823),r=8,o=4,s=4,c={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function a(t,e){const n=e+s;return[(0,i.toUTF8String)(t,e,n),(0,i.readUInt32BE)(t,n)]}function d(t){const e=c[t];return{width:e,height:e,type:t}}e.ICNS={validate:t=>"icns"===(0,i.toUTF8String)(t,0,4),calculate(t){const e=t.length,n=(0,i.readUInt32BE)(t,o);let s=r,c=a(t,s),u=d(c[0]);if(s+=c[1],s===n)return u;const h={height:u.height,images:[u],width:u.width};for(;s<n&&s<e;)c=a(t,s),u=d(c[0]),s+=c[1],h.images.push(u);return h}}},345:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ICO=void 0;const i=n(823),r=1,o=6,s=16;function c(t,e){const n=t[e];return 0===n?256:n}function a(t,e){const n=o+e*s;return{height:c(t,n+1),width:c(t,n)}}e.ICO={validate(t){const e=(0,i.readUInt16LE)(t,0),n=(0,i.readUInt16LE)(t,4);if(0!==e||0===n)return!1;return(0,i.readUInt16LE)(t,2)===r},calculate(t){const e=(0,i.readUInt16LE)(t,4),n=a(t,0);if(1===e)return n;const r=[n];for(let n=1;n<e;n+=1)r.push(a(t,n));return{height:n.height,images:r,width:n.width}}}},275:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeHandlers=void 0;const i=n(683),r=n(827),o=n(387),s=n(589),c=n(665),a=n(797),d=n(345),u=n(185),h=n(750),l=n(446),f=n(992),p=n(743),g=n(956),y=n(262),I=n(967),v=n(583),U=n(849),E=n(331);e.typeHandlers={bmp:i.BMP,cur:r.CUR,dds:o.DDS,gif:s.GIF,heif:c.HEIF,icns:a.ICNS,ico:d.ICO,j2c:u.J2C,jp2:h.JP2,jpg:l.JPG,ktx:f.KTX,png:p.PNG,pnm:g.PNM,psd:y.PSD,svg:I.SVG,tga:v.TGA,tiff:U.TIFF,webp:E.WEBP}},185:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.J2C=void 0;const i=n(823);e.J2C={validate:t=>"ff4fff51"===(0,i.toHexString)(t,0,4),calculate:t=>({height:(0,i.readUInt32BE)(t,12),width:(0,i.readUInt32BE)(t,8)})}},750:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JP2=void 0;const i=n(823);e.JP2={validate(t){if(1783636e3!==(0,i.readUInt32BE)(t,4)||(0,i.readUInt32BE)(t,0)<1)return!1;const e=(0,i.findBox)(t,"ftyp",0);return!!e&&1718909296===(0,i.readUInt32BE)(t,e.offset+4)},calculate(t){const e=(0,i.findBox)(t,"jp2h",0),n=e&&(0,i.findBox)(t,"ihdr",e.offset+8);if(n)return{height:(0,i.readUInt32BE)(t,n.offset+8),width:(0,i.readUInt32BE)(t,n.offset+12)};throw new TypeError("Unsupported JPEG 2000 format")}}},446:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JPG=void 0;const i=n(823),r="45786966",o=2,s=6,c=2,a="4d4d",d="4949",u=12,h=2;function l(t){return(0,i.toHexString)(t,2,6)===r}function f(t,e){return{height:(0,i.readUInt16BE)(t,e),width:(0,i.readUInt16BE)(t,e+2)}}function p(t,e){const n=s+8,r=(0,i.readUInt)(t,16,n,e);for(let o=0;o<r;o++){const r=n+h+o*u,s=r+u;if(r>t.length)return;const c=t.slice(r,s);if(274===(0,i.readUInt)(c,16,0,e)){if(3!==(0,i.readUInt)(c,16,2,e))return;if(1!==(0,i.readUInt)(c,32,4,e))return;return(0,i.readUInt)(c,16,8,e)}}}function g(t,e){const n=t.slice(o,e),r=(0,i.toHexString)(n,s,s+c),u=r===a;if(u||r===d)return p(n,u)}function y(t,e){if(e>t.length)throw new TypeError("Corrupt JPG, exceeded buffer limits")}e.JPG={validate:t=>"ffd8"===(0,i.toHexString)(t,0,2),calculate(t){let e,n;for(t=t.slice(4);t.length;){const r=(0,i.readUInt16BE)(t,0);if(255===t[r]){if(l(t)&&(e=g(t,r)),y(t,r),n=t[r+1],192===n||193===n||194===n){const n=f(t,r+5);return e?{height:n.height,orientation:e,width:n.width}:n}t=t.slice(r+2)}else t=t.slice(1)}throw new TypeError("Invalid JPG, no size found")}}},992:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KTX=void 0;const i=n(823);e.KTX={validate:t=>{const e=(0,i.toUTF8String)(t,1,7);return["KTX 11","KTX 20"].includes(e)},calculate:t=>{const e=49===t[5]?"ktx":"ktx2",n="ktx"===e?36:20;return{height:(0,i.readUInt32LE)(t,n+4),width:(0,i.readUInt32LE)(t,n),type:e}}}},743:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PNG=void 0;const i=n(823),r="PNG\r\n\n",o="IHDR",s="CgBI";e.PNG={validate(t){if(r===(0,i.toUTF8String)(t,1,8)){let e=(0,i.toUTF8String)(t,12,16);if(e===s&&(e=(0,i.toUTF8String)(t,28,32)),e!==o)throw new TypeError("Invalid PNG");return!0}return!1},calculate:t=>(0,i.toUTF8String)(t,12,16)===s?{height:(0,i.readUInt32BE)(t,36),width:(0,i.readUInt32BE)(t,32)}:{height:(0,i.readUInt32BE)(t,20),width:(0,i.readUInt32BE)(t,16)}}},956:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PNM=void 0;const i=n(823),r={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},o={default:t=>{let e=[];for(;t.length>0;){const n=t.shift();if("#"!==n[0]){e=n.split(" ");break}}if(2===e.length)return{height:parseInt(e[1],10),width:parseInt(e[0],10)};throw new TypeError("Invalid PNM")},pam:t=>{const e={};for(;t.length>0;){const n=t.shift();if(n.length>16||n.charCodeAt(0)>128)continue;const[i,r]=n.split(" ");if(i&&r&&(e[i.toLowerCase()]=parseInt(r,10)),e.height&&e.width)break}if(e.height&&e.width)return{height:e.height,width:e.width};throw new TypeError("Invalid PAM")}};e.PNM={validate:t=>(0,i.toUTF8String)(t,0,2)in r,calculate(t){const e=(0,i.toUTF8String)(t,0,2),n=r[e],s=(0,i.toUTF8String)(t,3).split(/[\r\n]+/);return(o[n]||o.default)(s)}}},262:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PSD=void 0;const i=n(823);e.PSD={validate:t=>"8BPS"===(0,i.toUTF8String)(t,0,4),calculate:t=>({height:(0,i.readUInt32BE)(t,14),width:(0,i.readUInt32BE)(t,18)})}},967:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SVG=void 0;const i=n(823),r=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,o={height:/\sheight=(['"])([^%]+?)\1/,root:r,viewbox:/\sviewBox=(['"])(.+?)\1/i,width:/\swidth=(['"])([^%]+?)\1/},s=2.54,c={in:96,cm:96/s,em:16,ex:8,m:96/s*100,mm:96/s/10,pc:96/72/12,pt:96/72,px:1},a=new RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys(c).join("|")})?$`);function d(t){const e=a.exec(t);if(e)return Math.round(Number(e[1])*(c[e[2]]||1))}function u(t){const e=t.split(" ");return{height:d(e[3]),width:d(e[2])}}function h(t){const e=t.match(o.width),n=t.match(o.height),i=t.match(o.viewbox);return{height:n&&d(n[2]),viewbox:i&&u(i[2]),width:e&&d(e[2])}}function l(t){return{height:t.height,width:t.width}}function f(t,e){const n=e.width/e.height;return t.width?{height:Math.floor(t.width/n),width:t.width}:t.height?{height:t.height,width:Math.floor(t.height*n)}:{height:e.height,width:e.width}}e.SVG={validate:t=>r.test((0,i.toUTF8String)(t,0,1e3)),calculate(t){const e=(0,i.toUTF8String)(t).match(o.root);if(e){const t=h(e[0]);if(t.width&&t.height)return l(t);if(t.viewbox)return f(t,t.viewbox)}throw new TypeError("Invalid SVG")}}},583:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TGA=void 0;const i=n(823);e.TGA={validate:t=>0===(0,i.readUInt16LE)(t,0)&&0===(0,i.readUInt16LE)(t,4),calculate:t=>({height:(0,i.readUInt16LE)(t,14),width:(0,i.readUInt16LE)(t,12)})}},849:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TIFF=void 0;const i=n(147),r=n(823);function o(t,e,n){const o=(0,r.readUInt)(t,32,4,n);let s=1024;const c=i.statSync(e).size;o+s>c&&(s=c-o-10);const a=new Uint8Array(s),d=i.openSync(e,"r");return i.readSync(d,a,0,s,o),i.closeSync(d),a.slice(2)}function s(t,e){const n=(0,r.readUInt)(t,16,8,e);return((0,r.readUInt)(t,16,10,e)<<16)+n}function c(t){if(t.length>24)return t.slice(12)}function a(t,e){const n={};let i=t;for(;i&&i.length;){const t=(0,r.readUInt)(i,16,0,e),o=(0,r.readUInt)(i,16,2,e),a=(0,r.readUInt)(i,32,4,e);if(0===t)break;1!==a||3!==o&&4!==o||(n[t]=s(i,e)),i=c(i)}return n}function d(t){const e=(0,r.toUTF8String)(t,0,2);return"II"===e?"LE":"MM"===e?"BE":void 0}const u=["49492a00","4d4d002a"];e.TIFF={validate:t=>u.includes((0,r.toHexString)(t,0,4)),calculate(t,e){if(!e)throw new TypeError("Tiff doesn't support buffer");const n="BE"===d(t),i=a(o(t,e,n),n),r=i[256],s=i[257];if(!r||!s)throw new TypeError("Invalid Tiff. Missing tags");return{height:s,width:r}}}},823:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findBox=e.readUInt=e.readUInt32LE=e.readUInt32BE=e.readInt32LE=e.readUInt24LE=e.readUInt16LE=e.readUInt16BE=e.readInt16LE=e.toHexString=e.toUTF8String=void 0;const n=new TextDecoder,i=(t,e=0,i=t.length)=>n.decode(t.slice(e,i));e.toUTF8String=i;const r=(t,e=0,n=t.length)=>t.slice(e,n).reduce(((t,e)=>t+("0"+e.toString(16)).slice(-2)),"");e.toHexString=r;const o=(t,e=0)=>{const n=t[e]+256*t[e+1];return n|131070*(32768&n)};e.readInt16LE=o;const s=(t,e=0)=>256*t[e]+t[e+1];e.readUInt16BE=s;const c=(t,e=0)=>t[e]+256*t[e+1];e.readUInt16LE=c;const a=(t,e=0)=>t[e]+256*t[e+1]+65536*t[e+2];e.readUInt24LE=a;const d=(t,e=0)=>t[e]+256*t[e+1]+65536*t[e+2]+(t[e+3]<<24);e.readInt32LE=d;const u=(t,e=0)=>t[e]*2**24+65536*t[e+1]+256*t[e+2]+t[e+3];e.readUInt32BE=u;const h=(t,e=0)=>t[e]+256*t[e+1]+65536*t[e+2]+t[e+3]*2**24;e.readUInt32LE=h;const l={readUInt16BE:e.readUInt16BE,readUInt16LE:e.readUInt16LE,readUInt32BE:e.readUInt32BE,readUInt32LE:e.readUInt32LE};function f(t,e,n,i){n=n||0;return l["readUInt"+e+(i?"BE":"LE")](t,n)}function p(t,n){if(t.length-n<4)return;const i=(0,e.readUInt32BE)(t,n);return t.length-n<i?void 0:{name:(0,e.toUTF8String)(t,4+n,8+n),offset:n,size:i}}function g(t,e,n){for(;n<t.length;){const i=p(t,n);if(!i)break;if(i.name===e)return i;n+=i.size}}e.readUInt=f,e.findBox=g},331:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WEBP=void 0;const i=n(823);function r(t){return{height:1+(0,i.readUInt24LE)(t,7),width:1+(0,i.readUInt24LE)(t,4)}}function o(t){return{height:1+((15&t[4])<<10|t[3]<<2|(192&t[2])>>6),width:1+((63&t[2])<<8|t[1])}}function s(t){return{height:16383&(0,i.readInt16LE)(t,8),width:16383&(0,i.readInt16LE)(t,6)}}e.WEBP={validate(t){const e="RIFF"===(0,i.toUTF8String)(t,0,4),n="WEBP"===(0,i.toUTF8String)(t,8,12),r="VP8"===(0,i.toUTF8String)(t,12,15);return e&&n&&r},calculate(t){const e=(0,i.toUTF8String)(t,12,16);if(t=t.slice(20,30),"VP8X"===e){const e=t[0];if(0==(192&e)&&0==(1&e))return r(t);throw new TypeError("Invalid WebP")}if("VP8 "===e&&47!==t[0])return s(t);const n=(0,i.toHexString)(t,3,6);if("VP8L"===e&&"9d012a"!==n)return o(t);throw new TypeError("Invalid WebP")}}},842:(t,e,n)=>{try{var i=n(837);if("function"!=typeof i.inherits)throw"";t.exports=i.inherits}catch(e){t.exports=n(782)}},782:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},927:(t,e,n)=>{var i=n(842),r=n(361).EventEmitter;function o(t){if(!(this instanceof o))return new o(t);r.call(this),t=t||{},this.concurrency=t.concurrency||1/0,this.timeout=t.timeout||0,this.autostart=t.autostart||!1,this.results=t.results||null,this.pending=0,this.session=0,this.running=!1,this.jobs=[],this.timers={}}function s(){for(var t in this.timers){var e=this.timers[t];delete this.timers[t],clearTimeout(e)}}function c(t){var e=this;function n(t){e.end(t)}function i(r){e.removeListener("error",n),e.removeListener("end",i),t(r,this.results)}this.on("error",n),this.on("end",i)}function a(t){this.session++,this.running=!1,this.emit("end",t)}t.exports=o,t.exports.default=o,i(o,r),["pop","shift","indexOf","lastIndexOf"].forEach((function(t){o.prototype[t]=function(){return Array.prototype[t].apply(this.jobs,arguments)}})),o.prototype.slice=function(t,e){return this.jobs=this.jobs.slice(t,e),this},o.prototype.reverse=function(){return this.jobs.reverse(),this},["push","unshift","splice"].forEach((function(t){o.prototype[t]=function(){var e=Array.prototype[t].apply(this.jobs,arguments);return this.autostart&&this.start(),e}})),Object.defineProperty(o.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),o.prototype.start=function(t){if(t&&c.call(this,t),this.running=!0,!(this.pending>=this.concurrency))if(0!==this.jobs.length){var e=this,n=this.jobs.shift(),i=!0,r=this.session,o=null,s=!1,d=null,u=n.hasOwnProperty("timeout")?n.timeout:this.timeout;u&&(o=setTimeout((function(){s=!0,e.listeners("timeout").length>0?e.emit("timeout",l,n):l()}),u),this.timers[o]=o),this.results&&(d=this.results.length,this.results[d]=null),this.pending++,e.emit("start",n);var h=n(l);h&&h.then&&"function"==typeof h.then&&h.then((function(t){return l(null,t)})).catch((function(t){return l(t||!0)})),this.running&&this.jobs.length>0&&this.start()}else 0===this.pending&&a.call(this);function l(t,c){i&&e.session===r&&(i=!1,e.pending--,null!==o&&(delete e.timers[o],clearTimeout(o)),t?e.emit("error",t,n):!1===s&&(null!==d&&(e.results[d]=Array.prototype.slice.call(arguments,1)),e.emit("success",c,n)),e.session===r&&(0===e.pending&&0===e.jobs.length?a.call(e):e.running&&e.start()))}},o.prototype.stop=function(){this.running=!1},o.prototype.end=function(t){s.call(this),this.jobs.length=0,this.pending=0,a.call(this,t)}},361:t=>{"use strict";t.exports=require("events")},147:t=>{"use strict";t.exports=require("fs")},17:t=>{"use strict";t.exports=require("path")},837:t=>{"use strict";t.exports=require("util")}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}},s=!0;try{t[i](o,o.exports,n),s=!1}finally{s&&delete e[i]}return o.exports}void 0!==n&&(n.ab=__dirname+"/");var i=n(751);module.exports=i})();