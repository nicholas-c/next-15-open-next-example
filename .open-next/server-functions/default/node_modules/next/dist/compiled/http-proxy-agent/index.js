(()=>{"use strict";var t={862:(t,e)=>{function o(t,e,{signal:o}={}){return new Promise(((r,n)=>{function i(){null==o||o.removeEventListener("abort",i),t.removeListener(e,s),t.removeListener("error",u)}function s(...t){i(),r(t)}function u(t){i(),n(t)}null==o||o.addEventListener("abort",i),t.on(e,s),t.on("error",u)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},448:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const n=o(361),i=r(o(937)),s=r(o(457)),u=i.default("agent-base");function a(t){return Boolean(t)&&"function"==typeof t.addRequest}function l(){const{stack:t}=new Error;return"string"==typeof t&&t.split("\n").some((t=>-1!==t.indexOf("(https.js:")||-1!==t.indexOf("node:https:")))}function c(t,e){return new c.Agent(t,e)}!function(t){class e extends n.EventEmitter{constructor(t,e){super();let o=e;"function"==typeof t?this.callback=t:t&&(o=t),this.timeout=null,o&&"number"==typeof o.timeout&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:l()?443:80}set defaultPort(t){this.explicitDefaultPort=t}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:l()?"https:":"http:"}set protocol(t){this.explicitProtocol=t}callback(t,e,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(t,e){const o=Object.assign({},e);"boolean"!=typeof o.secureEndpoint&&(o.secureEndpoint=l()),null==o.host&&(o.host="localhost"),null==o.port&&(o.port=o.secureEndpoint?443:80),null==o.protocol&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,t._last=!0,t.shouldKeepAlive=!1;let r=!1,n=null;const i=o.timeout||this.timeout,c=e=>{t._hadError||(t.emit("error",e),t._hadError=!0)},p=()=>{n=null,r=!0;const t=new Error(`A "socket" was not created for HTTP request before ${i}ms`);t.code="ETIMEOUT",c(t)},f=t=>{r||(null!==n&&(clearTimeout(n),n=null),c(t))},d=e=>{if(r)return;if(null!=n&&(clearTimeout(n),n=null),a(e))return u("Callback returned another Agent instance %o",e.constructor.name),void e.addRequest(t,o);if(e)return e.once("free",(()=>{this.freeSocket(e,o)})),void t.onSocket(e);const i=new Error(`no Duplex stream was returned to agent-base for \`${t.method} ${t.path}\``);c(i)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(u("Converting legacy callback function to promise"),this.promisifiedCallback=s.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof i&&i>0&&(n=setTimeout(p,i)),"port"in o&&"number"!=typeof o.port&&(o.port=Number(o.port));try{u("Resolving socket for %o request: %o",o.protocol,`${t.method} ${t.path}`),Promise.resolve(this.promisifiedCallback(t,o)).then(d,f)}catch(t){Promise.reject(t).catch(f)}}else c(new Error("`callback` is not defined"))}freeSocket(t,e){u("Freeing socket %o %o",t.constructor.name,e),t.destroy()}destroy(){u("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype}(c||(c={})),t.exports=c},457:(t,e)=>{function o(t){return function(e,o){return new Promise(((r,n)=>{t.call(this,e,o,((t,e)=>{t?n(t):r(e)}))}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},386:function(t,e,o){var r=this&&this.__awaiter||function(t,e,o,r){function n(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):n(t.value).then(s,u)}a((r=r.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(o(808)),s=n(o(404)),u=n(o(310)),a=n(o(937)),l=n(o(862)),c=o(448),p=(0,a.default)("http-proxy-agent");function f(t){return"string"==typeof t&&/^https:?$/i.test(t)}class d extends c.Agent{constructor(t){let e;if(e="string"==typeof t?u.default.parse(t):t,!e)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");p("Creating new HttpProxyAgent instance: %o",e),super(e);const o=Object.assign({},e);this.secureProxy=e.secureProxy||f(o.protocol),o.host=o.hostname||o.host,"string"==typeof o.port&&(o.port=parseInt(o.port,10)),!o.port&&o.host&&(o.port=this.secureProxy?443:80),o.host&&o.path&&(delete o.path,delete o.pathname),this.proxy=o}callback(t,e){return r(this,void 0,void 0,(function*(){const{proxy:o,secureProxy:r}=this,n=u.default.parse(t.path);let a;if(n.protocol||(n.protocol="http:"),n.hostname||(n.hostname=e.hostname||e.host||null),null==n.port&&(e.port,1)&&(n.port=String(e.port)),"80"===n.port&&(n.port=""),t.path=u.default.format(n),o.auth&&t.setHeader("Proxy-Authorization",`Basic ${Buffer.from(o.auth).toString("base64")}`),r?(p("Creating `tls.Socket`: %o",o),a=s.default.connect(o)):(p("Creating `net.Socket`: %o",o),a=i.default.connect(o)),t._header){let e,o;p("Regenerating stored HTTP header string for request"),t._header=null,t._implicitHeader(),t.output&&t.output.length>0?(p("Patching connection write() output buffer with updated header"),e=t.output[0],o=e.indexOf("\r\n\r\n")+4,t.output[0]=t._header+e.substring(o),p("Output buffer: %o",t.output)):t.outputData&&t.outputData.length>0&&(p("Patching connection write() output buffer with updated header"),e=t.outputData[0].data,o=e.indexOf("\r\n\r\n")+4,t.outputData[0].data=t._header+e.substring(o),p("Output buffer: %o",t.outputData[0].data))}return yield(0,l.default)(a,"connect"),a}))}}e.default=d},289:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const n=r(o(386));function i(t){return new n.default(t)}!function(t){t.HttpProxyAgent=n.default,t.prototype=n.default.prototype}(i||(i={})),t.exports=i},361:t=>{t.exports=require("events")},808:t=>{t.exports=require("net")},937:t=>{t.exports=require("next/dist/compiled/debug")},404:t=>{t.exports=require("tls")},310:t=>{t.exports=require("url")}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var i=e[r]={exports:{}},s=!0;try{t[r].call(i.exports,i,i.exports,o),s=!1}finally{s&&delete e[r]}return i.exports}void 0!==o&&(o.ab=__dirname+"/");var r=o(289);module.exports=r})();