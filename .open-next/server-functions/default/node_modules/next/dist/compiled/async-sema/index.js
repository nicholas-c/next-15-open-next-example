(()=>{"use strict";var t={490:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(361));function n(t,e,s,i,r){for(let n=0;n<r;++n)s[n+i]=t[n+e],t[n+e]=void 0}function h(t){return t>>>=0,t-=1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1}function a(t){return h(Math.min(Math.max(16,t),1073741824))}class o{constructor(t){this._capacity=a(t),this._length=0,this._front=0,this.arr=[]}push(t){const e=this._length;this.checkCapacity(e+1);const s=this._front+e&this._capacity-1;return this.arr[s]=t,this._length=e+1,e+1}pop(){const t=this._length;if(0===t)return;const e=this._front+t-1&this._capacity-1,s=this.arr[e];return this.arr[e]=void 0,this._length=t-1,s}shift(){const t=this._length;if(0===t)return;const e=this._front,s=this.arr[e];return this.arr[e]=void 0,this._front=e+1&this._capacity-1,this._length=t-1,s}get length(){return this._length}checkCapacity(t){this._capacity<t&&this.resizeTo(a(1.5*this._capacity+16))}resizeTo(t){const e=this._capacity;this._capacity=t;const s=this._front,i=this._length;if(s+i>e){const t=s+i&e-1;n(this.arr,0,this.arr,e,t)}}}class u extends r.default{}function c(t){return"function"==typeof t}function l(){return"1"}class p{constructor(t,{initFn:e=l,pauseFn:s,resumeFn:i,capacity:r=10}={}){if(c(s)!==c(i))throw new Error("pauseFn and resumeFn must be both set for pausing");this.nrTokens=t,this.free=new o(t),this.waiting=new o(r),this.releaseEmitter=new u,this.noTokens=e===l,this.pauseFn=s,this.resumeFn=i,this.paused=!1,this.releaseEmitter.on("release",(t=>{const e=this.waiting.shift();e?e.resolve(t):(this.resumeFn&&this.paused&&(this.paused=!1,this.resumeFn()),this.free.push(t))}));for(let s=0;s<t;s++)this.free.push(e())}async acquire(){let t=this.free.pop();return void 0!==t?t:new Promise(((t,e)=>{this.pauseFn&&!this.paused&&(this.paused=!0,this.pauseFn()),this.waiting.push({resolve:t,reject:e})}))}release(t){this.releaseEmitter.emit("release",this.noTokens?"1":t)}drain(){const t=new Array(this.nrTokens);for(let e=0;e<this.nrTokens;e++)t[e]=this.acquire();return Promise.all(t)}nrWaiting(){return this.waiting.length}}function f(t,{timeUnit:e=1e3,uniformDistribution:s=!1}={}){const i=new p(s?1:t),r=s?e/t:e;return async function(){await i.acquire(),setTimeout((()=>i.release()),r)}}e.Sema=p,e.RateLimit=f},361:t=>{t.exports=require("events")}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={exports:{}},h=!0;try{t[i].call(n.exports,n,n.exports,s),h=!1}finally{h&&delete e[i]}return n.exports}void 0!==s&&(s.ab=__dirname+"/");var i=s(490);module.exports=i})();