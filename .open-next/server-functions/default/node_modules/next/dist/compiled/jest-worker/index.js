(()=>{"use strict";var e={914:e=>{e.exports=(e,t=process.argv)=>{const r=e.startsWith("-")?"":1===e.length?"-":"--",s=t.indexOf(r+e),o=t.indexOf("--");return-1!==s&&(-1===o||s<o)}},460:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(r(552)),o=r(582);function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u{constructor(e,t,r={}){var o,i;n(this,"_computeWorkerKey",void 0),n(this,"_workerSchedulingPolicy",void 0),n(this,"_cacheKeys",Object.create(null)),n(this,"_locks",[]),n(this,"_offset",0),n(this,"_taskQueue",void 0),this._numOfWorkers=e,this._callback=t,this._computeWorkerKey=r.computeWorkerKey,this._workerSchedulingPolicy=null!==(o=r.workerSchedulingPolicy)&&void 0!==o?o:"round-robin",this._taskQueue=null!==(i=r.taskQueue)&&void 0!==i?i:new s.default}doWork(e,...t){const r=new Set,s=e=>(r.add(e),()=>{r.delete(e)}),i=e=>{r.forEach((t=>t(e)))},n=new Promise(((t,s,n)=>{const u=this._computeWorkerKey,l=[o.CHILD_MESSAGE_CALL,!1,e,t];let a=null,_=null;u&&(_=u.call(this,e,...t),a=null==_?null:this._cacheKeys[_]);const h=e=>{null!=_&&(this._cacheKeys[_]=e)},d=(e,t)=>{r.clear(),e?n(e):s(t)},c={onCustomMessage:i,onEnd:d,onStart:h,request:l};a?(this._taskQueue.enqueue(c,a.getWorkerId()),this._process(a.getWorkerId())):this._push(c)}).bind(null,t));return n.UNSTABLE_onCustomMessage=s,n}_process(e){if(this._isLocked(e))return this;const t=this._taskQueue.dequeue(e);if(!t)return this;if(t.request[1])throw new Error("Queue implementation returned processed task");const r=t.onEnd,s=(t,s)=>{r(t,s),this._unlock(e),this._process(e)};return t.request[1]=!0,this._lock(e),this._callback(e,t.request,t.onStart,s,t.onCustomMessage),this}_push(e){this._taskQueue.enqueue(e);const t=this._getNextWorkerOffset();for(let r=0;r<this._numOfWorkers&&(this._process((t+r)%this._numOfWorkers),!e.request[1]);r++);return this}_getNextWorkerOffset(){switch(this._workerSchedulingPolicy){case"in-order":return 0;case"round-robin":return this._offset++}}_lock(e){this._locks[e]=!0}_unlock(e){this._locks[e]=!1}_isLocked(e){return this._locks[e]}}t.default=u},552:(e,t)=>{function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class s{constructor(){r(this,"_workerQueues",[]),r(this,"_sharedQueue",new o)}enqueue(e,t){if(null==t)return void this._sharedQueue.enqueue(e);let r=this._workerQueues[t];null==r&&(r=this._workerQueues[t]=new o);const s={previousSharedTask:this._sharedQueue.peekLast(),task:e};r.enqueue(s)}dequeue(e){var t,r,s;const o=null===(t=this._workerQueues[e])||void 0===t?void 0:t.peek(),i=null===(r=null==o||null===(s=o.previousSharedTask)||void 0===s?void 0:s.request[1])||void 0===r||r;var n,u,l;return null!=o&&i?null!==(n=null===(u=this._workerQueues[e])||void 0===u||null===(l=u.dequeue())||void 0===l?void 0:l.task)&&void 0!==n?n:null:this._sharedQueue.dequeue()}}t.default=s;class o{constructor(){r(this,"_head",null),r(this,"_last",null)}enqueue(e){const t={next:null,value:e};null==this._last?this._head=t:this._last.next=t,this._last=t}dequeue(){if(null==this._head)return null;const e=this._head;return this._head=e.next,null==this._head&&(this._last=null),e.value}peek(){var e,t;return null!==(e=null===(t=this._head)||void 0===t?void 0:t.value)&&void 0!==e?e:null}peekLast(){var e,t;return null!==(e=null===(t=this._last)||void 0===t?void 0:t.value)&&void 0!==e?e:null}}},601:(e,t)=>{function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class s{constructor(e){r(this,"_queue",[]),r(this,"_sharedQueue",new o),this._computePriority=e}enqueue(e,t){if(null==t)this._enqueue(e,this._sharedQueue);else{const r=this._getWorkerQueue(t);this._enqueue(e,r)}}_enqueue(e,t){const r={priority:this._computePriority(e.request[2],...e.request[3]),task:e};t.add(r)}dequeue(e){const t=this._getWorkerQueue(e),r=t.peek(),s=this._sharedQueue.peek();var o,i;return null==s||null!=r&&r.priority<=s.priority?null!==(o=null===(i=t.poll())||void 0===i?void 0:i.task)&&void 0!==o?o:null:this._sharedQueue.poll().task}_getWorkerQueue(e){let t=this._queue[e];return null==t&&(t=this._queue[e]=new o),t}}t.default=s;class o{constructor(){r(this,"_heap",[])}peek(){var e;return null!==(e=this._heap[0])&&void 0!==e?e:null}add(e){const t=this._heap;if(t.push(e),1===t.length)return;let r=t.length-1;for(;r>0;){const s=Math.floor((r+1)/2)-1,o=t[s];if(o.priority<=e.priority)break;t[r]=o,t[s]=e,r=s}}poll(){const e=this._heap,t=e[0],r=e.pop();if(null==t||0===e.length)return null!=t?t:null;let s=0;e[0]=null!=r?r:null;const o=e[0];for(;;){let t=null;const r=2*(s+1),i=r-1,n=e[r],u=e[i];if(null!=u&&u.priority<o.priority&&(t=i),null!=n&&n.priority<(null==t?o:u).priority&&(t=r),null==t)break;e[s]=e[t],e[t]=o,s=t}return t}}},30:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r(481));function o(e){return e&&e.__esModule?e:{default:e}}const i=()=>{try{return r(267),!0}catch{return!1}};class n extends s.default{send(e,t,r,s,o){this.getWorkerById(e).send(t,r,s,o)}createWorker(e){let t;return t=this._options.enableWorkerThreads&&i()?r(925).Z:r(804).Z,new t(e)}}var u=n;t.default=u},481:(e,t,r)=>{function s(){const e=l(r(17));return s=function(){return e},e}function o(){const e=n(r(942));return o=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(582);function n(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=o?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const _=500,h=()=>{};class d{constructor(e,t){a(this,"_stderr",void 0),a(this,"_stdout",void 0),a(this,"_options",void 0),a(this,"_workers",void 0),this._options=t,this._workers=new Array(t.numWorkers),s().isAbsolute(e)||(e=require.resolve(e));const r=(0,o().default)(),i=(0,o().default)(),{forkOptions:n,maxRetries:u,resourceLimits:l,setupArgs:_}=t;for(let s=0;s<t.numWorkers;s++){const t={forkOptions:n,maxRetries:u,resourceLimits:l,setupArgs:_,workerId:s,workerPath:e},o=this.createWorker(t),a=o.getStdout(),h=o.getStderr();a&&r.add(a),h&&i.add(h),this._workers[s]=o}this._stdout=r,this._stderr=i}getStderr(){return this._stderr}getStdout(){return this._stdout}getWorkers(){return this._workers}getWorkerById(e){return this._workers[e]}createWorker(e){throw Error("Missing method createWorker in WorkerPool")}async end(){const e=this._workers.map((async e=>{e.send([i.CHILD_MESSAGE_END,!1],h,h,h);let t=!1;const r=setTimeout((()=>{e.forceExit(),t=!0}),_);return await e.waitForExit(),clearTimeout(r),t}));return(await Promise.all(e)).reduce(((e,t)=>({forceExited:e.forceExited||t})),{forceExited:!1})}}t.default=d},582:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PARENT_MESSAGE_SETUP_ERROR=t.PARENT_MESSAGE_OK=t.PARENT_MESSAGE_CUSTOM=t.PARENT_MESSAGE_CLIENT_ERROR=t.CHILD_MESSAGE_INITIALIZE=t.CHILD_MESSAGE_END=t.CHILD_MESSAGE_CALL=void 0;const r=0;t.CHILD_MESSAGE_INITIALIZE=r;const s=1;t.CHILD_MESSAGE_CALL=s;const o=2;t.CHILD_MESSAGE_END=o;const i=0;t.PARENT_MESSAGE_OK=i;const n=1;t.PARENT_MESSAGE_CLIENT_ERROR=n;const u=2;t.PARENT_MESSAGE_SETUP_ERROR=u;const l=3;t.PARENT_MESSAGE_CUSTOM=l},804:(e,t,r)=>{function s(){const e=r(81);return s=function(){return e},e}function o(){const e=r(781);return o=function(){return e},e}function i(){const e=l(r(942));return i=function(){return e},e}function n(){const e=r(178);return n=function(){return e},e}t.Z=void 0;var u=r(582);function l(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const _=128,h=_+9,d=_+15,c=500;class f{constructor(e){a(this,"_child",void 0),a(this,"_options",void 0),a(this,"_request",void 0),a(this,"_retries",void 0),a(this,"_onProcessEnd",void 0),a(this,"_onCustomMessage",void 0),a(this,"_fakeStream",void 0),a(this,"_stdout",void 0),a(this,"_stderr",void 0),a(this,"_exitPromise",void 0),a(this,"_resolveExitPromise",void 0),this._options=e,this._request=null,this._fakeStream=null,this._stdout=null,this._stderr=null,this._exitPromise=new Promise((e=>{this._resolveExitPromise=e})),this.initialize()}initialize(){const e=n().stdout?{FORCE_COLOR:"1"}:{},t=(0,s().fork)(r.ab+"processChild.js",[],{cwd:process.cwd(),env:{...process.env,JEST_WORKER_ID:String(this._options.workerId+1),...e},execArgv:process.execArgv.filter((e=>!/^--(debug|inspect)/.test(e))),silent:!0,...this._options.forkOptions});if(t.stdout&&(this._stdout||(this._stdout=(0,i().default)(this._getFakeStream())),this._stdout.add(t.stdout)),t.stderr&&(this._stderr||(this._stderr=(0,i().default)(this._getFakeStream())),this._stderr.add(t.stderr)),t.on("message",this._onMessage.bind(this)),t.on("exit",this._onExit.bind(this)),t.send([u.CHILD_MESSAGE_INITIALIZE,!1,this._options.workerPath,this._options.setupArgs]),this._child=t,this._retries++,this._retries>this._options.maxRetries){const e=new Error(`Jest worker encountered ${this._retries} child process exceptions, exceeding retry limit`);this._onMessage([u.PARENT_MESSAGE_CLIENT_ERROR,e.name,e.message,e.stack,{type:"WorkerError"}])}}_shutdown(){this._fakeStream&&(this._fakeStream.end(),this._fakeStream=null),this._resolveExitPromise()}_onMessage(e){let t;switch(e[0]){case u.PARENT_MESSAGE_OK:this._onProcessEnd(null,e[1]);break;case u.PARENT_MESSAGE_CLIENT_ERROR:if(t=e[4],null!=t&&"object"==typeof t){const r=t,s=global[e[1]];t=new("function"==typeof s?s:Error)(e[2]),t.type=e[1],t.stack=e[3];for(const e in r)t[e]=r[e]}this._onProcessEnd(t,null);break;case u.PARENT_MESSAGE_SETUP_ERROR:t=new Error("Error when calling setup: "+e[2]),t.type=e[1],t.stack=e[3],this._onProcessEnd(t,null);break;case u.PARENT_MESSAGE_CUSTOM:this._onCustomMessage(e[1]);break;default:throw new TypeError("Unexpected response from worker: "+e[0])}}_onExit(e){0!==e&&null!==e&&e!==d&&e!==h?(this.initialize(),this._request&&this._child.send(this._request)):this._shutdown()}send(e,t,r,s){t(this),this._onProcessEnd=(...e)=>(this._request=null,r(...e)),this._onCustomMessage=(...e)=>s(...e),this._request=e,this._retries=0,this._child.send(e,(()=>{}))}waitForExit(){return this._exitPromise}forceExit(){this._child.kill("SIGTERM");const e=setTimeout((()=>this._child.kill("SIGKILL")),c);this._exitPromise.then((()=>clearTimeout(e)))}getWorkerId(){return this._options.workerId}getStdout(){return this._stdout}getStderr(){return this._stderr}_getFakeStream(){return this._fakeStream||(this._fakeStream=new(o().PassThrough)),this._fakeStream}}t.Z=f},925:(e,t,r)=>{function s(){const e=_(r(17));return s=function(){return e},e}function o(){const e=r(781);return o=function(){return e},e}function i(){const e=r(267);return i=function(){return e},e}function n(){const e=l(r(942));return n=function(){return e},e}t.Z=void 0;var u=r(582);function l(e){return e&&e.__esModule?e:{default:e}}function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=o?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d{constructor(e){h(this,"_worker",void 0),h(this,"_options",void 0),h(this,"_request",void 0),h(this,"_retries",void 0),h(this,"_onProcessEnd",void 0),h(this,"_onCustomMessage",void 0),h(this,"_fakeStream",void 0),h(this,"_stdout",void 0),h(this,"_stderr",void 0),h(this,"_exitPromise",void 0),h(this,"_resolveExitPromise",void 0),h(this,"_forceExited",void 0),this._options=e,this._request=null,this._fakeStream=null,this._stdout=null,this._stderr=null,this._exitPromise=new Promise((e=>{this._resolveExitPromise=e})),this._forceExited=!1,this.initialize()}initialize(){if(this._worker=new(i().Worker)(s().resolve(__dirname,"./threadChild.js"),{eval:!1,resourceLimits:this._options.resourceLimits,stderr:!0,stdout:!0,workerData:this._options.workerData,...this._options.forkOptions}),this._worker.stdout&&(this._stdout||(this._stdout=(0,n().default)(this._getFakeStream())),this._stdout.add(this._worker.stdout)),this._worker.stderr&&(this._stderr||(this._stderr=(0,n().default)(this._getFakeStream())),this._stderr.add(this._worker.stderr)),this._worker.on("message",this._onMessage.bind(this)),this._worker.on("exit",this._onExit.bind(this)),this._worker.postMessage([u.CHILD_MESSAGE_INITIALIZE,!1,this._options.workerPath,this._options.setupArgs,String(this._options.workerId+1)]),this._retries++,this._retries>this._options.maxRetries){const e=new Error("Call retries were exceeded");this._onMessage([u.PARENT_MESSAGE_CLIENT_ERROR,e.name,e.message,e.stack,{type:"WorkerError"}])}}_shutdown(){this._fakeStream&&(this._fakeStream.end(),this._fakeStream=null),this._resolveExitPromise()}_onMessage(e){let t;switch(e[0]){case u.PARENT_MESSAGE_OK:this._onProcessEnd(null,e[1]);break;case u.PARENT_MESSAGE_CLIENT_ERROR:if(t=e[4],null!=t&&"object"==typeof t){const r=t,s=global[e[1]];t=new("function"==typeof s?s:Error)(e[2]),t.type=e[1],t.stack=e[3];for(const e in r)t[e]=r[e]}this._onProcessEnd(t,null);break;case u.PARENT_MESSAGE_SETUP_ERROR:t=new Error("Error when calling setup: "+e[2]),t.type=e[1],t.stack=e[3],this._onProcessEnd(t,null);break;case u.PARENT_MESSAGE_CUSTOM:this._onCustomMessage(e[1]);break;default:throw new TypeError("Unexpected response from worker: "+e[0])}}_onExit(e){0===e||this._forceExited?this._shutdown():(this.initialize(),this._request&&this._worker.postMessage(this._request))}waitForExit(){return this._exitPromise}forceExit(){this._forceExited=!0,this._worker.terminate()}send(e,t,r,s){t(this),this._onProcessEnd=(...e)=>{var t;this._request=null;const s=null===(t=r)||void 0===t?void 0:t(...e);return r=null,s},this._onCustomMessage=(...e)=>s(...e),this._request=e,this._retries=0,this._worker.postMessage(e)}getWorkerId(){return this._options.workerId}getStdout(){return this._stdout}getStderr(){return this._stderr}_getFakeStream(){return this._fakeStream||(this._fakeStream=new(o().PassThrough)),this._fakeStream}}t.Z=d},922:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var s=r(582);const o=(()=>{try{const{isMainThread:e,parentPort:t}=r(267);return!e&&null!=t}catch{return!1}})();function i(e,t=process){if(o){const{parentPort:t}=r(267);t.postMessage([s.PARENT_MESSAGE_CUSTOM,e])}else{if("function"!=typeof t.send)throw new Error('"messageParent" can only be used inside a worker');t.send([s.PARENT_MESSAGE_CUSTOM,e])}}},942:(e,t,r)=>{const{PassThrough:s}=r(781);e.exports=function(){var e=[],t=new s({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=o,t.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(r),t;function r(s){return Array.isArray(s)?(s.forEach(r),this):(e.push(s),s.once("end",i.bind(null,s)),s.once("error",t.emit.bind(t,"error")),s.pipe(t,{end:!1}),this)}function o(){return 0==e.length}function i(r){!(e=e.filter((function(e){return e!==r}))).length&&t.readable&&t.end()}}},178:(e,t,r)=>{const s=r(37),o=r(224),i=r(914),{env:n}=process;let u;function l(){if("FORCE_COLOR"in n)return"true"===n.FORCE_COLOR?1:"false"===n.FORCE_COLOR?0:0===n.FORCE_COLOR.length?1:Math.min(Number.parseInt(n.FORCE_COLOR,10),3)}function a(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function _(e,{streamIsTTY:t,sniffFlags:r=!0}={}){const o=l();void 0!==o&&(u=o);const a=r?u:o;if(0===a)return 0;if(r){if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2}if(e&&!t&&void 0===a)return 0;const _=a||0;if("dumb"===n.TERM)return _;if("win32"===process.platform){const e=s.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some((e=>e in n))||"codeship"===n.CI_NAME?1:_;if("TEAMCITY_VERSION"in n)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION)?1:0;if("truecolor"===n.COLORTERM)return 3;if("TERM_PROGRAM"in n){const e=Number.parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:_}function h(e,t={}){return a(_(e,{streamIsTTY:e&&e.isTTY,...t}))}i("no-color")||i("no-colors")||i("color=false")||i("color=never")?u=0:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(u=1),e.exports={supportsColor:h,stdout:h({isTTY:o.isatty(1)}),stderr:h({isTTY:o.isatty(2)})}},81:e=>{e.exports=require("child_process")},37:e=>{e.exports=require("os")},17:e=>{e.exports=require("path")},781:e=>{e.exports=require("stream")},224:e=>{e.exports=require("tty")},267:e=>{e.exports=require("worker_threads")}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}},n=!0;try{e[s](i,i.exports,r),n=!1}finally{n&&delete t[s]}return i.exports}void 0!==r&&(r.ab=__dirname+"/");var s={};(()=>{var e=s;function t(){const e=r(37);return t=function(){return e},e}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"FifoQueue",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return n.default}}),e.Worker=void 0,Object.defineProperty(e,"messageParent",{enumerable:!0,get:function(){return l.default}});var o=a(r(460)),i=a(r(30)),n=a(r(601)),u=a(r(552)),l=a(r(922));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){let r=t.exposedMethods;if(!r){const t=require(e);r=Object.keys(t).filter((e=>"function"==typeof t[e])),"function"==typeof t&&(r=[...r,"default"])}return r}class d{constructor(e,r){var s,n,u,l,a,h;_(this,"_ending",void 0),_(this,"_farm",void 0),_(this,"_options",void 0),_(this,"_workerPool",void 0),this._options={...r},this._ending=!1;const d={enableWorkerThreads:null!==(s=this._options.enableWorkerThreads)&&void 0!==s&&s,forkOptions:null!==(n=this._options.forkOptions)&&void 0!==n?n:{},maxRetries:null!==(u=this._options.maxRetries)&&void 0!==u?u:3,numWorkers:null!==(l=this._options.numWorkers)&&void 0!==l?l:Math.max((0,t().cpus)().length-1,1),resourceLimits:null!==(a=this._options.resourceLimits)&&void 0!==a?a:{},setupArgs:null!==(h=this._options.setupArgs)&&void 0!==h?h:[]};this._options.WorkerPool?this._workerPool=new this._options.WorkerPool(e,d):this._workerPool=new i.default(e,d),this._farm=new o.default(d.numWorkers,this._workerPool.send.bind(this._workerPool),{computeWorkerKey:this._options.computeWorkerKey,taskQueue:this._options.taskQueue,workerSchedulingPolicy:this._options.workerSchedulingPolicy}),this._bindExposedWorkerMethods(e,this._options)}_bindExposedWorkerMethods(e,t){h(e,t).forEach((e=>{if(!e.startsWith("_")){if(this.constructor.prototype.hasOwnProperty(e))throw new TypeError("Cannot define a method called "+e);this[e]=this._callFunctionWithArgs.bind(this,e)}}))}_callFunctionWithArgs(e,...t){if(this._ending)throw new Error("Farm is ended, no more calls can be done to it");return this._farm.doWork(e,...t)}getStderr(){return this._workerPool.getStderr()}getStdout(){return this._workerPool.getStdout()}async end(){if(this._ending)throw new Error("Farm is ended, no more calls can be done to it");return this._ending=!0,this._workerPool.end()}}e.Worker=d})(),module.exports=s})();