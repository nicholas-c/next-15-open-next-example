"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"eventCliSession",{enumerable:!0,get:function(){return eventCliSession}});const _path=_interop_require_default(require("path"));function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}const EVENT_VERSION="NEXT_CLI_SESSION_STARTED";function hasBabelConfig(e){try{var l,n,i,o;const a=_path.default.join(e,"noop.js"),t=require("next/dist/compiled/babel/core").loadPartialConfig({cwd:e,filename:a,sourceFileName:a}),r=(null==(n=t.options)||null==(l=n.presets)?void 0:l.every((e=>{var l;return"next/babel"===(null==e||null==(l=e.file)?void 0:l.request)})))&&0===(null==(o=t.options)||null==(i=o.plugins)?void 0:i.length);return t.hasFilesystemConfig()&&!r}catch{return!1}}function eventCliSession(e,l,n){var i,o,a,t;const{images:r,i18n:s}=l||{},u={nextVersion:"15.2.0",nodeVersion:process.version,cliCommand:n.cliCommand,isSrcDir:n.isSrcDir,hasNowJson:n.hasNowJson,isCustomServer:n.isCustomServer,hasNextConfig:"default"!==l.configOrigin,buildTarget:"default",hasWebpackConfig:"function"==typeof(null==l?void 0:l.webpack),hasBabelConfig:hasBabelConfig(e),imageEnabled:!!r,imageFutureEnabled:!!r,basePathEnabled:!!(null==l?void 0:l.basePath),i18nEnabled:!!s,locales:(null==s?void 0:s.locales)?s.locales.join(","):null,localeDomainsCount:(null==s?void 0:s.domains)?s.domains.length:null,localeDetectionEnabled:s?!1!==s.localeDetection:null,imageDomainsCount:(null==r?void 0:r.domains)?r.domains.length:null,imageRemotePatternsCount:(null==r?void 0:r.remotePatterns)?r.remotePatterns.length:null,imageLocalPatternsCount:(null==r?void 0:r.localPatterns)?r.localPatterns.length:null,imageSizes:(null==r?void 0:r.imageSizes)?r.imageSizes.join(","):null,imageQualities:(null==r?void 0:r.qualities)?r.qualities.join(","):null,imageLoader:null==r?void 0:r.loader,imageFormats:(null==r?void 0:r.formats)?r.formats.join(","):null,nextConfigOutput:(null==l?void 0:l.output)||null,trailingSlashEnabled:!!(null==l?void 0:l.trailingSlash),reactStrictMode:!!(null==l?void 0:l.reactStrictMode),webpackVersion:n.webpackVersion||null,turboFlag:n.turboFlag||!1,appDir:n.appDir,pagesDir:n.pagesDir,staticStaleTime:(null==(i=l.experimental.staleTimes)?void 0:i.static)??null,dynamicStaleTime:(null==(o=l.experimental.staleTimes)?void 0:o.dynamic)??null,reactCompiler:Boolean(l.experimental.reactCompiler),reactCompilerCompilationMode:"boolean"!=typeof l.experimental.reactCompiler?(null==(a=l.experimental.reactCompiler)?void 0:a.compilationMode)??null:null,reactCompilerPanicThreshold:"boolean"!=typeof l.experimental.reactCompiler?(null==(t=l.experimental.reactCompiler)?void 0:t.panicThreshold)??null:null};return[{eventName:EVENT_VERSION,payload:u}]}