"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"eventSwcLoadFailure",{enumerable:!0,get:function(){return eventSwcLoadFailure}});const _shared=require("../../trace/shared"),_packagejson=require("next/package.json"),EVENT_PLUGIN_PRESENT="NEXT_SWC_LOAD_FAILURE";async function eventSwcLoadFailure(e){const r=_shared.traceGlobals.get("telemetry");if(!r)return;let t,o;try{var n;t=null==(n=process.report)?void 0:n.getReport().header.glibcVersionRuntime}catch{}try{const e=Object.keys(_packagejson.optionalDependencies||{}).filter((e=>e.startsWith("@next/swc"))),r=[];for(const t of e)try{const{version:e}=require(`${t}/package.json`);r.push(`${t}@${e}`)}catch{}r.length>0&&(o=r.sort().join(","))}catch{}r.record({eventName:EVENT_PLUGIN_PRESENT,payload:{nextVersion:_packagejson.version,glibcVersion:t,installedSwcPackages:o,arch:process.arch,platform:process.platform,nodeVersion:process.versions.node,wasm:null==e?void 0:e.wasm,nativeBindingsErrorCode:null==e?void 0:e.nativeBindingsErrorCode}}),await r.flush()}