"use strict";function _export(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{default:function(){return loadConfig},getConfiguredExperimentalFeatures:function(){return getConfiguredExperimentalFeatures},normalizeConfig:function(){return _configshared.normalizeConfig},warnOptionHasBeenDeprecated:function(){return warnOptionHasBeenDeprecated},warnOptionHasBeenMovedOutOfExperimental:function(){return warnOptionHasBeenMovedOutOfExperimental}});const _fs=require("fs"),_path=require("path"),_url=require("url"),_findup=_interop_require_default(require("next/dist/compiled/find-up")),_log=_interop_require_wildcard(require("../build/output/log")),_constants=require("../shared/lib/constants"),_configshared=require("./config-shared"),_configutils=require("./config-utils"),_imageconfig=require("../shared/lib/image-config"),_env=require("@next/env"),_flushandexit=require("../telemetry/flush-and-exit"),_findroot=require("../lib/find-root"),_setuphttpagentenv=require("./setup-http-agent-env"),_pathhasprefix=require("../shared/lib/router/utils/path-has-prefix"),_matchremotepattern=require("../shared/lib/match-remote-pattern"),_ciinfo=require("../server/ci-info"),_transpileconfig=require("../build/next-config-ts/transpile-config"),_dset=require("../shared/lib/dset"),_zod=require("../shared/lib/zod"),_isbot=require("../shared/lib/router/utils/is-bot"),_findpagesdir=require("../lib/find-pages-dir");function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function _interop_require_wildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function normalizeNextConfigZodErrors(e){let t=!1;return[(0,_zod.normalizeZodErrors)(e).flatMap((({issue:e,message:r})=>("images"===e.path[0]&&(t=!0),r))),t]}function warnOptionHasBeenDeprecated(e,t,r,n){let i=!1;if(!n){let n=e,o=!0;const a=t.split(".");for(const e of a){if(void 0===n[e]){o=!1;break}n=n[e]}o&&(_log.warnOnce(r),i=!0)}return i}function warnOptionHasBeenMovedOutOfExperimental(e,t,r,n,i){if(e.experimental&&t in e.experimental){i||_log.warn(`\`experimental.${t}\` has been moved to \`${r}\`. Please update your ${n} file accordingly.`);let o=e;const a=r.split(".");for(;a.length>1;){const e=a.shift();o[e]=o[e]||{},o=o[e]}o[a.shift()]=e.experimental[t]}return e}function warnCustomizedOption(e,t,r,n,i,o){const a=t.split(".");let s=e;for(;a.length>=1;){const e=a.shift();if(!(e in s))return;s=s[e]}o||s===r||_log.warn(`The "${t}" option has been modified. ${n?n+". ":""}It should be removed from your ${i}.`)}function assignDefaults(e,t,r){var n,i,o,a,s,l,c,d,u,f,p,m,g,h,_;const b=t.configFileName;void 0!==t.exportTrailingSlash&&(r||_log.warn(`The "exportTrailingSlash" option has been renamed to "trailingSlash". Please update your ${b}.`),void 0===t.trailingSlash&&(t.trailingSlash=t.exportTrailingSlash),delete t.exportTrailingSlash);const E=Object.keys(t).reduce(((e,r)=>{const n=t[r];if(null==n)return e;if("distDir"===r){if("string"!=typeof n)throw Object.defineProperty(new Error(`Specified distDir is not a string, found type "${typeof n}"`),"__NEXT_ERROR_CODE",{value:"E206",enumerable:!1,configurable:!0});const e=n.trim();if("public"===e)throw Object.defineProperty(new Error("The 'public' directory is reserved in Next.js and can not be set as the 'distDir'. https://nextjs.org/docs/messages/can-not-output-to-public"),"__NEXT_ERROR_CODE",{value:"E221",enumerable:!1,configurable:!0});if(0===e.length)throw Object.defineProperty(new Error("Invalid distDir provided, distDir can not be an empty string. Please remove this config or set it to undefined"),"__NEXT_ERROR_CODE",{value:"E391",enumerable:!1,configurable:!0})}if("pageExtensions"===r){if(!Array.isArray(n))throw Object.defineProperty(new Error(`Specified pageExtensions is not an array of strings, found "${n}". Please update this config or remove it.`),"__NEXT_ERROR_CODE",{value:"E140",enumerable:!1,configurable:!0});if(!n.length)throw Object.defineProperty(new Error("Specified pageExtensions is an empty array. Please update it with the relevant extensions or remove it."),"__NEXT_ERROR_CODE",{value:"E43",enumerable:!1,configurable:!0});n.forEach((e=>{if("string"!=typeof e)throw Object.defineProperty(new Error(`Specified pageExtensions is not an array of strings, found "${e}" of type "${typeof e}". Please update this config or remove it.`),"__NEXT_ERROR_CODE",{value:"E108",enumerable:!1,configurable:!0})}))}return n&&n.constructor===Object?e[r]={..._configshared.defaultConfig[r],...Object.keys(n).reduce(((e,t)=>{const r=n[t];return null!=r&&(e[t]=r),e}),{})}:e[r]=n,e}),{});(null==(n=_configshared.defaultConfig.experimental)?void 0:n.ppr)&&_log.warn("`experimental.ppr` has been defaulted to `true` because `__NEXT_EXPERIMENTAL_PPR` was set to `true` during testing.");const v={..._configshared.defaultConfig,...E};if((null==(i=v.experimental)?void 0:i.allowDevelopmentBuild)&&"development"!==process.env.NODE_ENV)throw Object.defineProperty(new Error("The experimental.allowDevelopmentBuild option requires NODE_ENV to be explicitly set to 'development'."),"__NEXT_ERROR_CODE",{value:"E195",enumerable:!1,configurable:!0});if(!(null==(o="15.2.0")?void 0:o.includes("canary"))&&!process.env.__NEXT_TEST_MODE&&!process.env.NEXT_PRIVATE_LOCAL_DEV){var O,x,w,y,R;if(null==(O=v.experimental)?void 0:O.ppr)throw Object.defineProperty(new CanaryOnlyError("experimental.ppr"),"__NEXT_ERROR_CODE",{value:"E544",enumerable:!1,configurable:!0});if(null==(x=v.experimental)?void 0:x.dynamicIO)throw Object.defineProperty(new CanaryOnlyError("experimental.dynamicIO"),"__NEXT_ERROR_CODE",{value:"E607",enumerable:!1,configurable:!0});if(null==(y=v.experimental)||null==(w=y.turbo)?void 0:w.unstablePersistentCaching)throw Object.defineProperty(new CanaryOnlyError("experimental.turbo.unstablePersistentCaching"),"__NEXT_ERROR_CODE",{value:"E551",enumerable:!1,configurable:!0});if(null==(R=v.experimental)?void 0:R.nodeMiddleware)throw Object.defineProperty(new CanaryOnlyError("experimental.nodeMiddleware"),"__NEXT_ERROR_CODE",{value:"E650",enumerable:!1,configurable:!0})}if("export"===v.output){if(v.i18n)throw Object.defineProperty(new Error('Specified "i18n" cannot be used with "output: export". See more info here: https://nextjs.org/docs/messages/export-no-i18n'),"__NEXT_ERROR_CODE",{value:"E493",enumerable:!1,configurable:!0});_ciinfo.hasNextSupport||(v.rewrites&&_log.warn('Specified "rewrites" will not automatically work with "output: export". See more info here: https://nextjs.org/docs/messages/export-no-custom-routes'),v.redirects&&_log.warn('Specified "redirects" will not automatically work with "output: export". See more info here: https://nextjs.org/docs/messages/export-no-custom-routes'),v.headers&&_log.warn('Specified "headers" will not automatically work with "output: export". See more info here: https://nextjs.org/docs/messages/export-no-custom-routes'))}if("string"!=typeof v.assetPrefix)throw Object.defineProperty(new Error(`Specified assetPrefix is not a string, found type "${typeof v.assetPrefix}" https://nextjs.org/docs/messages/invalid-assetprefix`),"__NEXT_ERROR_CODE",{value:"E68",enumerable:!1,configurable:!0});if("string"!=typeof v.basePath)throw Object.defineProperty(new Error(`Specified basePath is not a string, found type "${typeof v.basePath}"`),"__NEXT_ERROR_CODE",{value:"E326",enumerable:!1,configurable:!0});if(""!==v.basePath){if("/"===v.basePath)throw Object.defineProperty(new Error('Specified basePath /. basePath has to be either an empty string or a path prefix"'),"__NEXT_ERROR_CODE",{value:"E95",enumerable:!1,configurable:!0});if(!v.basePath.startsWith("/"))throw Object.defineProperty(new Error(`Specified basePath has to start with a /, found "${v.basePath}"`),"__NEXT_ERROR_CODE",{value:"E105",enumerable:!1,configurable:!0});if("/"!==v.basePath){var P;if(v.basePath.endsWith("/"))throw Object.defineProperty(new Error(`Specified basePath should not end with /, found "${v.basePath}"`),"__NEXT_ERROR_CODE",{value:"E39",enumerable:!1,configurable:!0});""===v.assetPrefix&&(v.assetPrefix=v.basePath),""===(null==(P=v.amp)?void 0:P.canonicalBase)&&(v.amp.canonicalBase=v.basePath)}}if(null==v?void 0:v.images){const t=v.images;if("object"!=typeof t)throw Object.defineProperty(new Error(`Specified images should be an object received ${typeof t}.\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`),"__NEXT_ERROR_CODE",{value:"E171",enumerable:!1,configurable:!0});if(t.localPatterns){if(!Array.isArray(t.localPatterns))throw Object.defineProperty(new Error(`Specified images.localPatterns should be an Array received ${typeof t.localPatterns}.\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`),"__NEXT_ERROR_CODE",{value:"E118",enumerable:!1,configurable:!0});t.localPatterns.some((e=>"/_next/static/media/**"===e.pathname&&""===e.search))||t.localPatterns.push({pathname:"/_next/static/media/**",search:""})}if(t.remotePatterns){var T;if(!Array.isArray(t.remotePatterns))throw Object.defineProperty(new Error(`Specified images.remotePatterns should be an Array received ${typeof t.remotePatterns}.\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`),"__NEXT_ERROR_CODE",{value:"E27",enumerable:!1,configurable:!0});if(null==(T=E.assetPrefix)?void 0:T.startsWith("http"))try{const e=new URL(E.assetPrefix);t.remotePatterns.some((t=>(0,_matchremotepattern.matchRemotePattern)(t,e)))||t.remotePatterns.push({hostname:e.hostname,protocol:e.protocol.replace(/:$/,""),port:e.port})}catch(e){throw Object.defineProperty(new Error(`Invalid assetPrefix provided. Original error: ${e}`),"__NEXT_ERROR_CODE",{value:"E343",enumerable:!1,configurable:!0})}}if(t.domains&&!Array.isArray(t.domains))throw Object.defineProperty(new Error(`Specified images.domains should be an Array received ${typeof t.domains}.\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`),"__NEXT_ERROR_CODE",{value:"E402",enumerable:!1,configurable:!0});if(t.loader||(t.loader="default"),"default"!==t.loader&&"custom"!==t.loader&&t.path===_imageconfig.imageConfigDefault.path)throw Object.defineProperty(new Error(`Specified images.loader property (${t.loader}) also requires images.path property to be assigned to a URL prefix.\nSee more info here: https://nextjs.org/docs/api-reference/next/legacy/image#loader-configuration`),"__NEXT_ERROR_CODE",{value:"E228",enumerable:!1,configurable:!0});if(t.path===_imageconfig.imageConfigDefault.path&&v.basePath&&!(0,_pathhasprefix.pathHasPrefix)(t.path,v.basePath)&&(t.path=`${v.basePath}${t.path}`),!t.path||t.path.endsWith("/")||"default"===t.loader&&!v.trailingSlash||(t.path+="/"),t.loaderFile){if("default"!==t.loader&&"custom"!==t.loader)throw Object.defineProperty(new Error(`Specified images.loader property (${t.loader}) cannot be used with images.loaderFile property. Please set images.loader to "custom".`),"__NEXT_ERROR_CODE",{value:"E449",enumerable:!1,configurable:!0});const r=(0,_path.join)(e,t.loaderFile);if(!(0,_fs.existsSync)(r))throw Object.defineProperty(new Error(`Specified images.loaderFile does not exist at "${r}".`),"__NEXT_ERROR_CODE",{value:"E461",enumerable:!1,configurable:!0});t.loaderFile=r}}warnCustomizedOption(v,"experimental.esmExternals",!0,"experimental.esmExternals is not recommended to be modified as it may disrupt module resolution",b,r),warnOptionHasBeenDeprecated(v,"experimental.instrumentationHook",`\`experimental.instrumentationHook\` is no longer needed, because \`instrumentation.js\` is available by default. You can remove it from ${b}.`,r),warnOptionHasBeenDeprecated(v,"experimental.after",`\`experimental.after\` is no longer needed, because \`after\` is available by default. You can remove it from ${b}.`,r),warnOptionHasBeenDeprecated(v,"devIndicators.appIsrStatus",`\`devIndicators.appIsrStatus\` is deprecated and no longer configurable. Please remove it from ${b}.`,r),warnOptionHasBeenDeprecated(v,"devIndicators.buildActivity",`\`devIndicators.buildActivity\` is deprecated and no longer configurable. Please remove it from ${b}.`,r);if(warnOptionHasBeenDeprecated(v,"devIndicators.buildActivityPosition",`\`devIndicators.buildActivityPosition\` has been renamed to \`devIndicators.position\`. Please update your ${b} file accordingly.`,r)&&!1!==v.devIndicators&&(null==(a=v.devIndicators)?void 0:a.buildActivityPosition)&&v.devIndicators.buildActivityPosition!==v.devIndicators.position&&(_log.warnOnce(`The \`devIndicators\` option \`buildActivityPosition\` ("${v.devIndicators.buildActivityPosition}") conflicts with \`position\` ("${v.devIndicators.position}"). Using \`buildActivityPosition\` ("${v.devIndicators.buildActivityPosition}") for backward compatibility.`),v.devIndicators.position=v.devIndicators.buildActivityPosition),warnOptionHasBeenMovedOutOfExperimental(v,"bundlePagesExternals","bundlePagesRouterDependencies",b,r),warnOptionHasBeenMovedOutOfExperimental(v,"serverComponentsExternalPackages","serverExternalPackages",b,r),warnOptionHasBeenMovedOutOfExperimental(v,"relay","compiler.relay",b,r),warnOptionHasBeenMovedOutOfExperimental(v,"styledComponents","compiler.styledComponents",b,r),warnOptionHasBeenMovedOutOfExperimental(v,"emotion","compiler.emotion",b,r),warnOptionHasBeenMovedOutOfExperimental(v,"reactRemoveProperties","compiler.reactRemoveProperties",b,r),warnOptionHasBeenMovedOutOfExperimental(v,"removeConsole","compiler.removeConsole",b,r),warnOptionHasBeenMovedOutOfExperimental(v,"swrDelta","expireTime",b,r),warnOptionHasBeenMovedOutOfExperimental(v,"outputFileTracingRoot","outputFileTracingRoot",b,r),warnOptionHasBeenMovedOutOfExperimental(v,"outputFileTracingIncludes","outputFileTracingIncludes",b,r),warnOptionHasBeenMovedOutOfExperimental(v,"outputFileTracingExcludes","outputFileTracingExcludes",b,r),v.experimental.outputStandalone&&(r||_log.warn("experimental.outputStandalone has been renamed to \"output: 'standalone'\", please move the config."),v.output="standalone"),void 0!==(null==(l=v.experimental)||null==(s=l.serverActions)?void 0:s.bodySizeLimit)){var j;const e=parseInt(null==(j=v.experimental.serverActions)?void 0:j.bodySizeLimit.toString());if(isNaN(e)||e<1)throw Object.defineProperty(new Error("Server Actions Size Limit must be a valid number or filesize format larger than 1MB: https://nextjs.org/docs/app/api-reference/next-config-js/serverActions#bodysizelimit"),"__NEXT_ERROR_CODE",{value:"E100",enumerable:!1,configurable:!0})}if(warnOptionHasBeenMovedOutOfExperimental(v,"transpilePackages","transpilePackages",b,r),warnOptionHasBeenMovedOutOfExperimental(v,"skipMiddlewareUrlNormalize","skipMiddlewareUrlNormalize",b,r),warnOptionHasBeenMovedOutOfExperimental(v,"skipTrailingSlashRedirect","skipTrailingSlashRedirect",b,r),(null==v?void 0:v.outputFileTracingRoot)&&!(0,_path.isAbsolute)(v.outputFileTracingRoot)&&(v.outputFileTracingRoot=(0,_path.resolve)(v.outputFileTracingRoot),r||_log.warn(`outputFileTracingRoot should be absolute, using: ${v.outputFileTracingRoot}`)),(null==v||null==(d=v.experimental)||null==(c=d.turbo)?void 0:c.root)&&!(0,_path.isAbsolute)(v.experimental.turbo.root)&&(v.experimental.turbo.root=(0,_path.resolve)(v.experimental.turbo.root),r||_log.warn(`experimental.turbo.root should be absolute, using: ${v.experimental.turbo.root}`)),process.env.NEXT_DEPLOYMENT_ID&&(v.deploymentId=process.env.NEXT_DEPLOYMENT_ID),(null==v?void 0:v.outputFileTracingRoot)&&!(null==v||null==(f=v.experimental)||null==(u=f.turbo)?void 0:u.root)&&(0,_dset.dset)(v,["experimental","turbo","root"],v.outputFileTracingRoot),!(null==v?void 0:v.outputFileTracingRoot)||!(null==v||null==(m=v.experimental)||null==(p=m.turbo)?void 0:p.root)){let t=(0,_findroot.findRootDir)(e);var C,N;if(t)(null==v?void 0:v.outputFileTracingRoot)||(v.outputFileTracingRoot=t,_configshared.defaultConfig.outputFileTracingRoot=v.outputFileTracingRoot),(null==v||null==(N=v.experimental)||null==(C=N.turbo)?void 0:C.root)||((0,_dset.dset)(v,["experimental","turbo","root"],t),(0,_dset.dset)(_configshared.defaultConfig,["experimental","turbo","root"],t))}if((0,_setuphttpagentenv.setHttpClientAndAgentOptions)(v||_configshared.defaultConfig),v.i18n){Boolean((0,_findpagesdir.findDir)(e,"app"))&&warnOptionHasBeenDeprecated(v,"i18n",`i18n configuration in ${b} is unsupported in App Router.\nLearn more about internationalization in App Router: https://nextjs.org/docs/app/building-your-application/routing/internationalization`,r);const{i18n:t}=v,n=typeof t;if("object"!==n)throw Object.defineProperty(new Error(`Specified i18n should be an object received ${n}.\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`),"__NEXT_ERROR_CODE",{value:"E148",enumerable:!1,configurable:!0});if(!Array.isArray(t.locales))throw Object.defineProperty(new Error(`Specified i18n.locales should be an Array received ${typeof t.locales}.\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`),"__NEXT_ERROR_CODE",{value:"E227",enumerable:!1,configurable:!0});t.locales.length>100&&!r&&_log.warn(`Received ${t.locales.length} i18n.locales items which exceeds the recommended max of 100.\nSee more info here: https://nextjs.org/docs/advanced-features/i18n-routing#how-does-this-work-with-static-generation`);const i=typeof t.defaultLocale;if(!t.defaultLocale||"string"!==i)throw Object.defineProperty(new Error("Specified i18n.defaultLocale should be a string.\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config"),"__NEXT_ERROR_CODE",{value:"E441",enumerable:!1,configurable:!0});if(void 0!==t.domains&&!Array.isArray(t.domains))throw Object.defineProperty(new Error(`Specified i18n.domains must be an array of domain objects e.g. [ { domain: 'example.fr', defaultLocale: 'fr', locales: ['fr'] } ] received ${typeof t.domains}.\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`),"__NEXT_ERROR_CODE",{value:"E456",enumerable:!1,configurable:!0});if(t.domains){const e=t.domains.filter((e=>{var n;if(!e||"object"!=typeof e)return!0;if(!e.defaultLocale)return!0;if(!e.domain||"string"!=typeof e.domain)return!0;if(e.domain.includes(":"))return console.warn(`i18n domain: "${e.domain}" is invalid it should be a valid domain without protocol (https://) or port (:3000) e.g. example.vercel.sh`),!0;const i=null==(n=t.domains)?void 0:n.find((t=>t.defaultLocale===e.defaultLocale&&t.domain!==e.domain));if(!r&&i)return console.warn(`Both ${e.domain} and ${i.domain} configured the defaultLocale ${e.defaultLocale} but only one can. Change one item's default locale to continue`),!0;let o=!1;if(Array.isArray(e.locales))for(const r of e.locales){"string"!=typeof r&&(o=!0);for(const n of t.domains||[])if(n!==e&&n.locales&&n.locales.includes(r)){console.warn(`Both ${e.domain} and ${n.domain} configured the locale (${r}) but only one can. Remove it from one i18n.domains config to continue`),o=!0;break}}return o}));if(e.length>0)throw Object.defineProperty(new Error(`Invalid i18n.domains values:\n${e.map((e=>JSON.stringify(e))).join("\n")}\n\ndomains value must follow format { domain: 'example.fr', defaultLocale: 'fr', locales: ['fr'] }.\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`),"__NEXT_ERROR_CODE",{value:"E413",enumerable:!1,configurable:!0})}if(!Array.isArray(t.locales))throw Object.defineProperty(new Error(`Specified i18n.locales must be an array of locale strings e.g. ["en-US", "nl-NL"] received ${typeof t.locales}.\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`),"__NEXT_ERROR_CODE",{value:"E432",enumerable:!1,configurable:!0});const o=t.locales.filter((e=>"string"!=typeof e));if(o.length>0)throw Object.defineProperty(new Error(`Specified i18n.locales contains invalid values (${o.map(String).join(", ")}), locales must be valid locale tags provided as strings e.g. "en-US".\nSee here for list of valid language sub-tags: http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry`),"__NEXT_ERROR_CODE",{value:"E71",enumerable:!1,configurable:!0});if(!t.locales.includes(t.defaultLocale))throw Object.defineProperty(new Error("Specified i18n.defaultLocale should be included in i18n.locales.\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config"),"__NEXT_ERROR_CODE",{value:"E515",enumerable:!1,configurable:!0});const a=new Set,s=new Set;if(t.locales.forEach((e=>{const t=e.toLowerCase();a.has(t)&&s.add(e),a.add(t)})),s.size>0)throw Object.defineProperty(new Error(`Specified i18n.locales contains the following duplicate locales:\n${[...s].join(", ")}\nEach locale should be listed only once.\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`),"__NEXT_ERROR_CODE",{value:"E471",enumerable:!1,configurable:!0});t.locales=[t.defaultLocale,...t.locales.filter((e=>e!==t.defaultLocale))];const l=typeof t.localeDetection;if("boolean"!==l&&"undefined"!==l)throw Object.defineProperty(new Error(`Specified i18n.localeDetection should be undefined or a boolean received ${l}.\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`),"__NEXT_ERROR_CODE",{value:"E439",enumerable:!1,configurable:!0})}if(!1!==v.devIndicators&&(null==(g=v.devIndicators)?void 0:g.position)){const{position:e}=v.devIndicators,t=["top-left","top-right","bottom-left","bottom-right"];if(!t.includes(e))throw Object.defineProperty(new Error(`Invalid "devIndicator.position" provided, expected one of ${t.join(", ")}, received ${e}`),"__NEXT_ERROR_CODE",{value:"E643",enumerable:!1,configurable:!0})}if(v.experimental){var S,D,$,I,A;v.experimental.cacheLife={...null==(S=_configshared.defaultConfig.experimental)?void 0:S.cacheLife,...v.experimental.cacheLife};const e=null==($=_configshared.defaultConfig.experimental)||null==(D=$.cacheLife)?void 0:D.default;if(!e||void 0===e.revalidate||void 0===e.expire||!(null==(A=_configshared.defaultConfig.experimental)||null==(I=A.staleTimes)?void 0:I.static))throw Object.defineProperty(new Error("No default cacheLife profile."),"__NEXT_ERROR_CODE",{value:"E350",enumerable:!1,configurable:!0});const t=v.experimental.cacheLife.default;if(t){if(void 0===t.stale){var L,X,q;const e=null==(L=v.experimental.staleTimes)?void 0:L.static;t.stale=e??(null==(q=_configshared.defaultConfig.experimental)||null==(X=q.staleTimes)?void 0:X.static)}void 0===t.revalidate&&(t.revalidate=e.revalidate),void 0===t.expire&&(t.expire=v.expireTime??e.expire)}else v.experimental.cacheLife.default=e;const r=v.experimental.cacheLife.seconds;if(r&&void 0===r.stale){var B,F,H;const e=null==(B=v.experimental.staleTimes)?void 0:B.dynamic;r.stale=e??(null==(H=_configshared.defaultConfig.experimental)||null==(F=H.staleTimes)?void 0:F.dynamic)}}if(null==(h=v.experimental)?void 0:h.cacheHandlers){const e=/[a-z-]/;if("object"!=typeof v.experimental.cacheHandlers)throw Object.defineProperty(new Error(`Invalid "experimental.cacheHandlers" provided, expected an object e.g. { default: '/my-handler.js' }, received ${JSON.stringify(v.experimental.cacheHandlers)}`),"__NEXT_ERROR_CODE",{value:"E197",enumerable:!1,configurable:!0});const t=Object.keys(v.experimental.cacheHandlers),r=[];for(const n of t){if(e.test(n)){const e=v.experimental.cacheHandlers[n];e&&!(0,_fs.existsSync)(e)&&r.push({key:n,reason:`cache handler path provided does not exist, received ${e}`})}else r.push({key:n,reason:"key must only use characters a-z and -"});if(r.length)throw Object.defineProperty(new Error(`Invalid handler fields configured for "experimental.cacheHandler":\n${r.map((e=>`${n}: ${e.reason}`)).join("\n")}`),"__NEXT_ERROR_CODE",{value:"E217",enumerable:!1,configurable:!0})}}const M=v.modularizeImports;v.modularizeImports={...M||{},"@mui/icons-material":{transform:"@mui/icons-material/{{member}}"},lodash:{transform:"lodash/{{member}}"}};const k=(null==(_=v.experimental)?void 0:_.optimizePackageImports)||[];return v.experimental||(v.experimental={}),v.experimental.optimizePackageImports=[...new Set([...k,"lucide-react","date-fns","lodash-es","ramda","antd","react-bootstrap","ahooks","@ant-design/icons","@headlessui/react","@headlessui-float/react","@heroicons/react/20/solid","@heroicons/react/24/solid","@heroicons/react/24/outline","@visx/visx","@tremor/react","rxjs","@mui/material","@mui/icons-material","recharts","react-use","effect","@effect/schema","@effect/platform","@effect/platform-node","@effect/platform-browser","@effect/platform-bun","@effect/sql","@effect/sql-mssql","@effect/sql-mysql2","@effect/sql-pg","@effect/sql-squlite-node","@effect/sql-squlite-bun","@effect/sql-squlite-wasm","@effect/sql-squlite-react-native","@effect/sql-squlite-wasm","@effect/rpc","@effect/rpc-http","@effect/typeclass","@effect/experimental","@effect/opentelemetry","@material-ui/core","@material-ui/icons","@tabler/icons-react","mui-core","react-icons/ai","react-icons/bi","react-icons/bs","react-icons/cg","react-icons/ci","react-icons/di","react-icons/fa","react-icons/fa6","react-icons/fc","react-icons/fi","react-icons/gi","react-icons/go","react-icons/gr","react-icons/hi","react-icons/hi2","react-icons/im","react-icons/io","react-icons/io5","react-icons/lia","react-icons/lib","react-icons/lu","react-icons/md","react-icons/pi","react-icons/ri","react-icons/rx","react-icons/si","react-icons/sl","react-icons/tb","react-icons/tfi","react-icons/ti","react-icons/vsc","react-icons/wi"])],v.htmlLimitedBots||(v.htmlLimitedBots=_isbot.HTML_LIMITED_BOT_UA_RE_STRING),void 0===v.experimental.useCache&&(v.experimental.useCache=v.experimental.dynamicIO),v}async function loadConfig(e,t,{customConfig:r,rawConfig:n,silent:i=!0,onLoadUserConfig:o,reactProductionProfiling:a}={}){if(!process.env.__NEXT_PRIVATE_RENDER_WORKER)try{(0,_configutils.loadWebpackHook)()}catch(e){if(!process.env.__NEXT_PRIVATE_STANDALONE_CONFIG)throw e}if(process.env.__NEXT_PRIVATE_STANDALONE_CONFIG)return JSON.parse(process.env.__NEXT_PRIVATE_STANDALONE_CONFIG);const s=i?{warn:()=>{},info:()=>{},error:()=>{}}:_log;(0,_env.loadEnvConfig)(t,e===_constants.PHASE_DEVELOPMENT_SERVER,s);let l="next.config.js";if(r)return assignDefaults(t,{configOrigin:"server",configFileName:l,...r},i);const c=await(0,_findup.default)(_constants.CONFIG_FILES,{cwd:t});if(process.env.__NEXT_TEST_MODE&&(c?_log.info(`Loading config from ${c}`):_log.info("No config file found")),null==c?void 0:c.length){var d,u,f,p,m,g;let r;l=(0,_path.basename)(c);try{const e=Object.assign({},process.env);r="jest"===process.env.__NEXT_TEST_MODE?require(c):"next.config.ts"===l?await(0,_transpileconfig.transpileConfig)({nextConfigPath:c,cwd:t}):await import((0,_url.pathToFileURL)(c).href);const i={};for(const t of Object.keys(process.env))e[t]!==process.env[t]&&(i[t]=process.env[t]);if((0,_env.updateInitialEnv)(i),n)return r}catch(e){throw s.error(`Failed to load ${l}, see more info here https://nextjs.org/docs/messages/next-config-error`),e}const b=await(0,_configshared.normalizeConfig)(e,r.default||r);if(!process.env.NEXT_MINIMAL){const{configSchema:e}=require("./config-schema"),t=e.safeParse(b);if(!1===t.success){const e=[`Invalid ${l} options detected: `],[r,n]=normalizeNextConfigZodErrors(t.error);for(const t of r)e.push(`    ${t}`);if(e.push("See more info here: https://nextjs.org/docs/messages/invalid-next-config"),n){for(const t of e)console.error(t);await(0,_flushandexit.flushAndExit)(1)}else for(const t of e)s.warn(t)}}if(b.target&&"server"!==b.target)throw Object.defineProperty(new Error(`The "target" property is no longer supported in ${l}.\nSee more info here https://nextjs.org/docs/messages/deprecated-target-config`),"__NEXT_ERROR_CODE",{value:"E478",enumerable:!1,configurable:!0});if(null==(d=b.amp)?void 0:d.canonicalBase){const{canonicalBase:e}=b.amp||{};b.amp=b.amp||{},b.amp.canonicalBase=((null==e?void 0:e.endsWith("/"))?e.slice(0,-1):e)||""}if(a&&(b.reactProductionProfiling=a),(null==(f=b.experimental)||null==(u=f.turbo)?void 0:u.loaders)&&!(null==(m=b.experimental)||null==(p=m.turbo)?void 0:p.rules)){s.warn('experimental.turbo.loaders is now deprecated. Please update next.config.js to use experimental.turbo.rules as soon as possible.\nThe new option is similar, but the key should be a glob instead of an extension.\nExample: loaders: { ".mdx": ["mdx-loader"] } -> rules: { "*.mdx": ["mdx-loader"] }" }\nSee more info here https://nextjs.org/docs/app/api-reference/next-config-js/turbo');const e={};for(const[t,r]of Object.entries(b.experimental.turbo.loaders))e["*"+t]=r;b.experimental.turbo.rules=e}if(null==(g=b.experimental)?void 0:g.useLightningcss){var h,_;const{loadBindings:e}=require("next/dist/build/swc");(null==(_=await e())||null==(h=_.css)?void 0:h.lightning)||(s.warn("experimental.useLightningcss is set, but the setting is disabled because next-swc/wasm does not support it yet."),b.experimental.useLightningcss=!1)}(null==b?void 0:b.htmlLimitedBots)instanceof RegExp&&(b.htmlLimitedBots=b.htmlLimitedBots.source),null==o||o(b);return assignDefaults(t,{configOrigin:(0,_path.relative)(t,c),configFile:c,configFileName:l,...b},i)}{const e=(0,_path.basename)(_constants.CONFIG_FILES[0],(0,_path.extname)(_constants.CONFIG_FILES[0])),r=_findup.default.sync([`${e}.cjs`,`${e}.cts`,`${e}.mts`,`${e}.json`,`${e}.jsx`,`${e}.tsx`],{cwd:t});if(null==r?void 0:r.length)throw Object.defineProperty(new Error(`Configuring Next.js via '${(0,_path.basename)(r)}' is not supported. Please replace the file with 'next.config.js', 'next.config.mjs', or 'next.config.ts'.`),"__NEXT_ERROR_CODE",{value:"E203",enumerable:!1,configurable:!0})}const b=assignDefaults(t,_configshared.defaultConfig,i);return b.configFileName=l,(0,_setuphttpagentenv.setHttpClientAndAgentOptions)(b),b}function getConfiguredExperimentalFeatures(e){const t=[];if(!e)return t;if(_configshared.defaultConfig.experimental)for(const r of Object.keys(e)){const n=e[r];("turbo"!==r||process.env.TURBOPACK)&&(r in _configshared.defaultConfig.experimental&&n!==_configshared.defaultConfig.experimental[r]&&t.push("boolean"==typeof n?{name:r,type:"boolean",value:n}:"number"==typeof n?{name:r,type:"number",value:n}:{name:r,type:"other"}))}return t}class CanaryOnlyError extends Error{constructor(e){super(`The experimental feature "${e}" can only be enabled when using the latest canary version of Next.js.`),this.stack=void 0}}