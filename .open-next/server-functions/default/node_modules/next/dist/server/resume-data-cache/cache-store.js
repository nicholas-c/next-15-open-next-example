"use strict";function _export(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{parseUseCacheCacheStore:function(){return parseUseCacheCacheStore},serializeUseCacheCacheStore:function(){return serializeUseCacheCacheStore}});const _encryptionutils=require("../app-render/encryption-utils");function parseUseCacheCacheStore(e){const t=new Map;for(const[r,{value:a,tags:s,stale:i,timestamp:n,expire:o,revalidate:c}]of e)t.set(r,Promise.resolve({value:new ReadableStream({start(e){e.enqueue((0,_encryptionutils.stringToUint8Array)(atob(a))),e.close()}}),tags:s,stale:i,timestamp:n,expire:o,revalidate:c}));return t}async function serializeUseCacheCacheStore(e){return Promise.all(Array.from(e).map((([e,t])=>t.then((async t=>{const[r,a]=t.value.tee();t.value=a;let s="";for await(const e of r)s+=(0,_encryptionutils.arrayBufferToString)(e);return[e,{value:btoa(s),tags:t.tags,stale:t.stale,timestamp:t.timestamp,expire:t.expire,revalidate:t.revalidate}]})))))}