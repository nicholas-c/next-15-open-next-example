"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _default}});const _constant=require("../constant"),_utils=require("../utils"),clientBoundary={getSemanticDiagnosticsForExportVariableStatement(t,e){const i=(0,_utils.getTs)(),n=[];if(i.isVariableDeclarationList(e.declarationList))for(const o of e.declarationList.declarations){const e=o.initializer;e&&i.isArrowFunction(e)&&n.push(...clientBoundary.getSemanticDiagnosticsForFunctionExport(t,e))}return n},getSemanticDiagnosticsForFunctionExport(t,e){var i,n;const o=(0,_utils.getTs)(),r=(0,_utils.getTypeChecker)();if(!r)return[];const s=[],a=/[\\/]error\.tsx?$/.test(t.fileName),c=/[\\/]global-error\.tsx?$/.test(t.fileName),l=null==(n=e.parameters)||null==(i=n[0])?void 0:i.name;if(l&&o.isObjectBindingPattern(l))for(const e of l.elements){var u,g;const i=null==(g=r.getTypeAtLocation(e).symbol)||null==(u=g.getDeclarations())?void 0:u[0],n=(e.propertyName||e.name).getText();if(i)if(o.isFunctionTypeNode(i)){"action"===n||/.+Action$/.test(n)||(a||c)&&"reset"===n||s.push({file:t,category:o.DiagnosticCategory.Warning,code:_constant.NEXT_TS_ERRORS.INVALID_CLIENT_ENTRY_PROP,messageText:`Props must be serializable for components in the "use client" entry file. "${n}" is a function that's not a Server Action. Rename "${n}" either to "action" or have its name end with "Action" e.g. "${n}Action" to indicate it is a Server Action.`,start:e.getStart(),length:e.getWidth()})}else(o.isConstructorTypeNode(i)||o.isClassDeclaration(i))&&s.push({file:t,category:o.DiagnosticCategory.Warning,code:_constant.NEXT_TS_ERRORS.INVALID_CLIENT_ENTRY_PROP,messageText:`Props must be serializable for components in the "use client" entry file, "${n}" is invalid.`,start:e.getStart(),length:e.getWidth()})}return s}},_default=clientBoundary;