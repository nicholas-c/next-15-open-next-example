"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _default}});const _constant=require("../constant"),_utils=require("../utils"),serverLayer={filterCompletionsAtPosition:e=>e.filter((e=>!_constant.DISALLOWED_SERVER_REACT_APIS.includes(e.name)||"react"!==e.source)),hasDisallowedReactAPIDefinition:e=>null==e?void 0:e.some((e=>_constant.DISALLOWED_SERVER_REACT_APIS.includes(e.name)&&"React"===e.containerName)),getSemanticDiagnosticsForImportDeclaration(e,t){const n=(0,_utils.getTs)(),o=[],s=t.moduleSpecifier.getText(e),r=t.importClause,a=null==r?void 0:r.namedBindings;if(r)if(/^['"]react['"]$/.test(s)){if(a&&n.isNamedImports(a)){const t=a.elements;for(const s of t){const t=s.name.getText(e);_constant.DISALLOWED_SERVER_REACT_APIS.includes(t)&&o.push({file:e,category:n.DiagnosticCategory.Error,code:_constant.NEXT_TS_ERRORS.INVALID_SERVER_API,messageText:`"${t}" is not allowed in Server Components.`,start:s.name.getStart(),length:s.name.getWidth()})}}}else if(/^['"]react-dom['"]$/.test(s)&&a&&n.isNamedImports(a)){const t=a.elements;for(const s of t){const t=s.name.getText(e);_constant.DISALLOWED_SERVER_REACT_DOM_APIS.includes(t)&&o.push({file:e,category:n.DiagnosticCategory.Error,code:_constant.NEXT_TS_ERRORS.INVALID_SERVER_API,messageText:`"${t}" is not allowed in Server Components.`,start:s.name.getStart(),length:s.name.getWidth()})}}return o}},_default=serverLayer;