"use strict";function _export(t,e){for(var r in e)Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{fromNodeOutgoingHttpHeaders:function(){return fromNodeOutgoingHttpHeaders},normalizeNextQueryParam:function(){return normalizeNextQueryParam},splitCookiesString:function(){return splitCookiesString},toNodeOutgoingHttpHeaders:function(){return toNodeOutgoingHttpHeaders},validateURL:function(){return validateURL}});const _constants=require("../../lib/constants");function fromNodeOutgoingHttpHeaders(t){const e=new Headers;for(let[r,n]of Object.entries(t)){const t=Array.isArray(n)?n:[n];for(let n of t)void 0!==n&&("number"==typeof n&&(n=n.toString()),e.append(r,n))}return e}function splitCookiesString(t){var e,r,n,o,s,i=[],u=0;function a(){for(;u<t.length&&/\s/.test(t.charAt(u));)u+=1;return u<t.length}function c(){return"="!==(r=t.charAt(u))&&";"!==r&&","!==r}for(;u<t.length;){for(e=u,s=!1;a();)if(","===(r=t.charAt(u))){for(n=u,u+=1,a(),o=u;u<t.length&&c();)u+=1;u<t.length&&"="===t.charAt(u)?(s=!0,u=o,i.push(t.substring(e,n)),e=u):u=n+1}else u+=1;(!s||u>=t.length)&&i.push(t.substring(e,t.length))}return i}function toNodeOutgoingHttpHeaders(t){const e={},r=[];if(t)for(const[n,o]of t.entries())"set-cookie"===n.toLowerCase()?(r.push(...splitCookiesString(o)),e[n]=1===r.length?r[0]:r):e[n]=o;return e}function validateURL(t){try{return String(new URL(String(t)))}catch(e){throw Object.defineProperty(new Error(`URL is malformed "${String(t)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:e}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function normalizeNextQueryParam(t){const e=[_constants.NEXT_QUERY_PARAM_PREFIX,_constants.NEXT_INTERCEPTION_MARKER_PREFIX];for(const r of e)if(t!==r&&t.startsWith(r))return t.substring(r.length);return null}