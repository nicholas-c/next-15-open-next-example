"use strict";function _export(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}function trackBodyConsumed(e,t){if("string"==typeof e){return async function*(){const r=new TextEncoder;yield r.encode(e),t()}()}return trackStreamConsumed(e,t)}function trackStreamConsumed(e,t){const r=new TransformStream,o=()=>t();return e.pipeTo(r.writable).then(o,o),r.readable}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{CloseController:function(){return CloseController},trackBodyConsumed:function(){return trackBodyConsumed},trackStreamConsumed:function(){return trackStreamConsumed}});class CloseController{onClose(e){if(this.isClosed)throw Object.defineProperty(new Error("Cannot subscribe to a closed CloseController"),"__NEXT_ERROR_CODE",{value:"E365",enumerable:!1,configurable:!0});this.target.addEventListener("close",e),this.listeners++}dispatchClose(){if(this.isClosed)throw Object.defineProperty(new Error("Cannot close a CloseController multiple times"),"__NEXT_ERROR_CODE",{value:"E229",enumerable:!1,configurable:!0});this.listeners>0&&this.target.dispatchEvent(new Event("close")),this.isClosed=!0}constructor(){this.target=new EventTarget,this.listeners=0,this.isClosed=!1}}