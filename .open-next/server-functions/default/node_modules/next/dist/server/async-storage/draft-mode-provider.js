"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"DraftModeProvider",{enumerable:!0,get:function(){return DraftModeProvider}});const _apiutils=require("../api-utils");class DraftModeProvider{constructor(e,t,i,o){var r;const s=e&&(0,_apiutils.checkIsOnDemandRevalidate)(t,e).isOnDemandRevalidate,n=null==(r=i.get(_apiutils.COOKIE_NAME_PRERENDER_BYPASS))?void 0:r.value;this.isEnabled=Boolean(!s&&n&&e&&(n===e.previewModeId||"production"!==process.env.NODE_ENV&&"development-id"===e.previewModeId)),this._previewModeId=null==e?void 0:e.previewModeId,this._mutableCookies=o}enable(){if(!this._previewModeId)throw Object.defineProperty(new Error("Invariant: previewProps missing previewModeId this should never happen"),"__NEXT_ERROR_CODE",{value:"E93",enumerable:!1,configurable:!0});this._mutableCookies.set({name:_apiutils.COOKIE_NAME_PRERENDER_BYPASS,value:this._previewModeId,httpOnly:!0,sameSite:"development"!==process.env.NODE_ENV?"none":"lax",secure:"development"!==process.env.NODE_ENV,path:"/"})}disable(){this._mutableCookies.set({name:_apiutils.COOKIE_NAME_PRERENDER_BYPASS,value:"",httpOnly:!0,sameSite:"development"!==process.env.NODE_ENV?"none":"lax",secure:"development"!==process.env.NODE_ENV,path:"/",expires:new Date(0)})}}