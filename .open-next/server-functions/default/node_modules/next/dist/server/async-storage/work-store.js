"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"createWorkStore",{enumerable:!0,get:function(){return createWorkStore}});const _aftercontext=require("../after/after-context"),_apppaths=require("../../shared/lib/router/utils/app-paths");function createWorkStore({page:e,fallbackRouteParams:t,renderOpts:r,requestEndedState:a,isPrefetchRequest:n,buildId:i}){const o={isStaticGeneration:!r.supportsDynamicResponse&&!r.isDraftMode&&!r.isServerAction,page:e,fallbackRouteParams:t,route:(0,_apppaths.normalizeAppPath)(e),incrementalCache:r.incrementalCache||globalThis.__incrementalCache,cacheLifeProfiles:r.cacheLifeProfiles,isRevalidate:r.isRevalidate,isPrerendering:r.nextExport,fetchCache:r.fetchCache,isOnDemandRevalidate:r.isOnDemandRevalidate,isDraftMode:r.isDraftMode,requestEndedState:a,isPrefetchRequest:n,buildId:i,reactLoadableManifest:(null==r?void 0:r.reactLoadableManifest)||{},assetPrefix:(null==r?void 0:r.assetPrefix)||"",afterContext:createAfterContext(r),dynamicIOEnabled:r.experimental.dynamicIO,dev:r.dev??!1};return r.store=o,o}function createAfterContext(e){const{waitUntil:t,onClose:r,onAfterTaskError:a}=e;return new _aftercontext.AfterContext({waitUntil:t,onClose:r,onTaskError:a})}