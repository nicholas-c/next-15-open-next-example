"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"PagesRouteMatcherProvider",{enumerable:!0,get:function(){return PagesRouteMatcherProvider}});const _isapiroute=require("../../lib/is-api-route"),_constants=require("../../shared/lib/constants"),_routekind=require("../route-kind"),_pagesroutematcher=require("../route-matchers/pages-route-matcher"),_manifestroutematcherprovider=require("./manifest-route-matcher-provider"),_pages=require("../normalizers/built/pages");class PagesRouteMatcherProvider extends _manifestroutematcherprovider.ManifestRouteMatcherProvider{constructor(e,r,t){super(_constants.PAGES_MANIFEST,r),this.i18nProvider=t,this.normalizers=new _pages.PagesNormalizers(e)}async transform(e){const r=Object.keys(e).filter((e=>!(0,_isapiroute.isAPIRoute)(e))).filter((e=>{var r;const t=(null==(r=this.i18nProvider)?void 0:r.analyze(e).pathname)??e;return!_constants.BLOCKED_PAGES.includes(t)})),t=[];for(const a of r)if(this.i18nProvider){const{detectedLocale:r,pathname:i}=this.i18nProvider.analyze(a);t.push(new _pagesroutematcher.PagesLocaleRouteMatcher({kind:_routekind.RouteKind.PAGES,pathname:i,page:a,bundlePath:this.normalizers.bundlePath.normalize(a),filename:this.normalizers.filename.normalize(e[a]),i18n:{locale:r}}))}else t.push(new _pagesroutematcher.PagesRouteMatcher({kind:_routekind.RouteKind.PAGES,pathname:a,page:a,bundlePath:this.normalizers.bundlePath.normalize(a),filename:this.normalizers.filename.normalize(e[a])}));return t}}