"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"DevAppRouteRouteMatcherProvider",{enumerable:!0,get:function(){return DevAppRouteRouteMatcherProvider}});const _approuteroutematcher=require("../../route-matchers/app-route-route-matcher"),_routekind=require("../../route-kind"),_filecacheroutematcherprovider=require("./file-cache-route-matcher-provider"),_isapprouteroute=require("../../../lib/is-app-route-route"),_app=require("../../normalizers/built/app"),_ismetadataroute=require("../../../lib/metadata/is-metadata-route"),_getmetadataroute=require("../../../lib/metadata/get-metadata-route"),_path=_interop_require_default(require("../../../shared/lib/isomorphic/path"));function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}class DevAppRouteRouteMatcherProvider extends _filecacheroutematcherprovider.FileCacheRouteMatcherProvider{constructor(e,t,a){super(e,a),this.appDir=e,this.normalizers=new _app.DevAppNormalizers(e,t)}async transform(e){const t=[];for(const a of e){const e=this.normalizers.page.normalize(a);if(!(0,_isapprouteroute.isAppRouteRoute)(e))continue;if(e.includes("/_"))continue;const r=this.normalizers.pathname.normalize(a),o=this.normalizers.bundlePath.normalize(a),u=_path.default.extname(a).slice(1),i=(0,_ismetadataroute.isMetadataRouteFile)(a.replace(this.appDir,""),[u],!0);if(!(0,_ismetadataroute.isStaticMetadataRoute)(e)&&i){{const u=(0,_getmetadataroute.normalizeMetadataPageToRoute)(e,!1),i=(0,_getmetadataroute.normalizeMetadataPageToRoute)(r,!1),n=(0,_getmetadataroute.normalizeMetadataPageToRoute)(o,!1),p=new _approuteroutematcher.AppRouteRouteMatcher({kind:_routekind.RouteKind.APP_ROUTE,page:u,pathname:i,bundlePath:n,filename:a});t.push(p)}{const u=(0,_getmetadataroute.normalizeMetadataPageToRoute)(e,!0),i=(0,_getmetadataroute.normalizeMetadataPageToRoute)(r,!0),n=(0,_getmetadataroute.normalizeMetadataPageToRoute)(o,!0),p=new _approuteroutematcher.AppRouteRouteMatcher({kind:_routekind.RouteKind.APP_ROUTE,page:u,pathname:i,bundlePath:n,filename:a});t.push(p)}}else t.push(new _approuteroutematcher.AppRouteRouteMatcher({kind:_routekind.RouteKind.APP_ROUTE,page:e,pathname:r,bundlePath:o,filename:a}))}return t}}