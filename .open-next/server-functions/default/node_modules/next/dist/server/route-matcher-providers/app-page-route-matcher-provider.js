"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AppPageRouteMatcherProvider",{enumerable:!0,get:function(){return AppPageRouteMatcherProvider}});const _isapppageroute=require("../../lib/is-app-page-route"),_constants=require("../../shared/lib/constants"),_app=require("../normalizers/built/app"),_routekind=require("../route-kind"),_apppageroutematcher=require("../route-matchers/app-page-route-matcher"),_manifestroutematcherprovider=require("./manifest-route-matcher-provider");class AppPageRouteMatcherProvider extends _manifestroutematcherprovider.ManifestRouteMatcherProvider{constructor(e,r){super(_constants.APP_PATHS_MANIFEST,r),this.normalizers=new _app.AppNormalizers(e)}async transform(e){const r=Object.keys(e).filter((e=>(0,_isapppageroute.isAppPageRoute)(e))),t={};for(const e of r){const r=this.normalizers.pathname.normalize(e);r in t?t[r].push(e):t[r]=[e]}const a=[];for(const[r,o]of Object.entries(t)){const t=o[0],i=this.normalizers.filename.normalize(e[t]),n=this.normalizers.bundlePath.normalize(t);a.push(new _apppageroutematcher.AppPageRouteMatcher({kind:_routekind.RouteKind.APP_PAGE,pathname:r,page:t,bundlePath:n,filename:i,appPaths:o}))}return a}}