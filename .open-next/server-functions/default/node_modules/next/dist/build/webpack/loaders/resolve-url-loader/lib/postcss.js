"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return process}});const _path=_interop_require_default(require("path")),_fileprotocol=require("./file-protocol");function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}const ORPHAN_CR_REGEX=/\r(?!\n)(.|\n)?/g;function process(e,o,r,t){return n.postcss=!0,e([n]).process(r,{from:(0,_fileprotocol.prepend)(o),map:t.outputSourceMap&&{prev:!!t.inputSourceMap&&(0,_fileprotocol.prepend)(t.inputSourceMap),inline:!1,annotation:!1,sourcesContent:!0}}).then((e=>({content:e.css,map:t.outputSourceMap?(0,_fileprotocol.remove)(e.map.toJSON()):null})));function n(){return{postcssPlugin:"postcss-resolve-url",Once:function(o){o.walkDecls(e)}};function e(e){if(e.value&&e.value.indexOf("url")>=0){const o=e.source.start,n=t.sourceMapConsumer&&t.sourceMapConsumer.originalPositionFor(o),u=n&&n.source&&(0,_fileprotocol.remove)(_path.default.dirname(n.source));if(u)e.value=t.transformDeclaration(e.value,u);else if(t.sourceMapConsumer)throw Object.defineProperty(new Error("source-map information is not available at url() declaration "+(ORPHAN_CR_REGEX.test(r)?"(found orphan CR, try removeCR option)":"(no orphan CR found)")),"__NEXT_ERROR_CODE",{value:"E34",enumerable:!1,configurable:!0})}}}}