"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getModuleBuildError",{enumerable:!0,get:function(){return getModuleBuildError}});const _fs=require("fs"),_path=_interop_require_wildcard(require("path")),_parseBabel=require("./parseBabel"),_parseCss=require("./parseCss"),_parseScss=require("./parseScss"),_parseNotFoundError=require("./parseNotFoundError"),_iserror=_interop_require_default(require("../../../../lib/is-error")),_parseNextFontError=require("./parseNextFontError"),_parseNextAppLoaderError=require("./parseNextAppLoaderError"),_parseNextInvalidImportError=require("./parseNextInvalidImportError");function _interop_require_default(r){return r&&r.__esModule?r:{default:r}}function _getRequireWildcardCache(r){if("function"!=typeof WeakMap)return null;var e=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(r){return r?t:e})(r)}function _interop_require_wildcard(r,e){if(!e&&r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=_getRequireWildcardCache(e);if(t&&t.has(r))return t.get(r);var o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if("default"!==u&&Object.prototype.hasOwnProperty.call(r,u)){var a=n?Object.getOwnPropertyDescriptor(r,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=r[u]}return o.default=r,t&&t.set(r,o),o}function getFileData(r,e){var t;let o,n=(null==(t=r.compiler)?void 0:t.context)??null;if(null!==n&&"string"==typeof e.resource){const r=_path.relative(n,e.resource).replace(/\\/g,_path.posix.sep);o=r.startsWith(".")?r:`.${_path.posix.sep}${r}`}else{const t=r.requestShortener;o="function"==typeof(null==e?void 0:e.readableIdentifier)?e.readableIdentifier(t):e.request??e.userRequest}if(o){let r=null;try{r=(0,_fs.readFileSync)(n?_path.resolve(n,o):o,"utf8")}catch{}return[o,r]}return["<unknown>",null]}async function getModuleBuildError(r,e,t){if("object"!=typeof t||"ModuleBuildError"!==(null==t?void 0:t.name)&&"ModuleNotFoundError"!==(null==t?void 0:t.name)||!Boolean(t.module)||!(0,_iserror.default)(t.error))return!1;const o=t.error,[n,u]=getFileData(e,t.module),a=await(0,_parseNotFoundError.getNotFoundError)(e,t,n,t.module);if(!1!==a)return a;const i=await(0,_parseNotFoundError.getImageError)(e,t,o);if(!1!==i)return i;const s=(0,_parseBabel.getBabelError)(n,o);if(!1!==s)return s;const l=(0,_parseCss.getCssError)(n,o);if(!1!==l)return l;const p=(0,_parseScss.getScssError)(n,u,o);if(!1!==p)return p;const d=(0,_parseNextFontError.getNextFontError)(o,t.module);if(!1!==d)return d;const c=(0,_parseNextAppLoaderError.getNextAppLoaderError)(o,t.module,r);if(!1!==c)return c;const f=(0,_parseNextInvalidImportError.getNextInvalidImportError)(o,t.module,e,r);return!1!==f&&f}