"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return DevToolsIgnorePlugin}});const _webpack=require("next/dist/compiled/webpack/webpack"),IGNORE_LIST="ignoreList",PLUGIN_NAME="devtools-ignore-plugin";function defaultShouldIgnorePath(e){return e.includes("/node_modules/")||e.includes("/webpack/")}function defaultIsSourceMapAsset(e){return e.endsWith(".map")}class DevToolsIgnorePlugin{constructor(e={}){this.options={shouldIgnorePath:e.shouldIgnorePath??defaultShouldIgnorePath,isSourceMapAsset:e.isSourceMapAsset??defaultIsSourceMapAsset}}apply(e){const{RawSource:o}=e.webpack.sources;e.hooks.compilation.tap(PLUGIN_NAME,(e=>{e.hooks.processAssets.tap({name:PLUGIN_NAME,stage:_webpack.webpack.Compilation.PROCESS_ASSETS_STAGE_DEV_TOOLING,additionalAssets:!0},(s=>{for(const[t,n]of Object.entries(s)){if(!this.options.isSourceMapAsset(t))continue;const s=n.source().toString();if(!s)continue;const r=JSON.parse(s),i=[];for(const[e,o]of r.sources.entries())this.options.shouldIgnorePath(o)&&i.push(e);r[IGNORE_LIST]=i,e.updateAsset(t,new o(JSON.stringify(r)))}}))}))}}