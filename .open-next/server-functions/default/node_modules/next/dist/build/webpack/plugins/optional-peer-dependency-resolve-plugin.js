"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"OptionalPeerDependencyResolverPlugin",{enumerable:!0,get:function(){return OptionalPeerDependencyResolverPlugin}});const pluginSymbol=Symbol("OptionalPeerDependencyResolverPlugin");class OptionalPeerDependencyResolverPlugin{apply(e){const n=e.ensureHook("raw-module");n.tapAsync("OptionalPeerDependencyResolverPlugin",((l,r,t)=>{var o;if(l[pluginSymbol])return t();null==(o=r.stack)||o.delete(Array.from(r.stack).pop()),e.doResolve(n,{...l,[pluginSymbol]:!0},null,r,((e,n)=>{var r;if(!n&&(null==l||null==(r=l.descriptionFileData)?void 0:r.peerDependenciesMeta)&&l.request){const e=l.descriptionFileData.peerDependenciesMeta;if(e&&e[l.request]&&e[l.request].optional)return t(null,{path:!1})}return t(e,n)}))}))}}