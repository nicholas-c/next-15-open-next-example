"use strict";function _export(e,n){for(var o in n)Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{decodeFromBase64:function(){return decodeFromBase64},encodeToBase64:function(){return encodeToBase64},getLoaderModuleNamedExports:function(){return getLoaderModuleNamedExports},isCSSMod:function(){return isCSSMod},isClientComponentEntryModule:function(){return isClientComponentEntryModule},regexCSS:function(){return regexCSS}});const _constants=require("../../../shared/lib/constants"),_getmodulebuildinfo=require("./get-module-build-info"),imageExtensions=["jpg","jpeg","png","webp","avif","ico","svg"],imageRegex=new RegExp(`\\.(${imageExtensions.join("|")})$`);function isActionClientLayerModule(e){const n=(0,_getmodulebuildinfo.getModuleBuildInfo)(e).rsc;return!(!(null==n?void 0:n.actionIds)||(null==n?void 0:n.type)!==_constants.RSC_MODULE_TYPES.client)}function isClientComponentEntryModule(e){const n=(0,_getmodulebuildinfo.getModuleBuildInfo)(e).rsc,o=null==n?void 0:n.isClientRef,t=isActionClientLayerModule(e);return o||t||imageRegex.test(e.resource)}const regexCSS=/\.(css|scss|sass)(\?.*)?$/;function isCSSMod(e){var n;return!!("css/mini-extract"===e.type||e.resource&&regexCSS.test(e.resource)||(null==(n=e.loaders)?void 0:n.some((({loader:e})=>e.includes("next-style-loader/index.js")||process.env.NEXT_RSPACK&&e.includes("rspack.CssExtractRspackPlugin.loader")||e.includes("mini-css-extract-plugin/loader.js")||e.includes("@vanilla-extract/webpack-plugin/loader/")))))}function encodeToBase64(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function decodeFromBase64(e){return JSON.parse(Buffer.from(e,"base64").toString("utf8"))}async function getLoaderModuleNamedExports(e,n){var o;return(null==(o=(await new Promise(((o,t)=>{n.loadModule(e,((e,n,r,i)=>{if(e)return t(e);o(i)}))}))).dependencies)?void 0:o.filter((e=>["HarmonyExportImportedSpecifierDependency","HarmonyExportSpecifierDependency"].includes(e.constructor.name)&&"name"in e&&"default"!==e.name)).map((e=>e.name)))||[]}