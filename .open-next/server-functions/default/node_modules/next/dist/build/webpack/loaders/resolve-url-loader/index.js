"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return resolveUrlLoader}});const _sourcemap=require("next/dist/compiled/source-map"),_valueprocessor=_interop_require_default(require("./lib/value-processor")),_joinfunction=require("./lib/join-function"),_postcss=_interop_require_default(require("./lib/postcss"));function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}async function resolveUrlLoader(e,r){const o=Object.assign({sourceMap:this.sourceMap,silent:!1,absolute:!1,keepQuery:!1,root:!1,debug:!1,join:_joinfunction.defaultJoin},this.getOptions());let t;r&&(t=new _sourcemap.SourceMapConsumer(r));const s=this.async(),{postcss:n}=o.postcss?await o.postcss():{postcss:require("postcss")};function u(e){s(i("CSS error",e))}function c(e){e&&(o.sourceMap?s(null,e.content,e.map):s(null,e.content))}function i(e,r){return Object.defineProperty(new Error(["resolve-url-loader",": ",[e].concat("string"==typeof r&&r||r instanceof Error&&[r.message,r.stack.split("\n",2)[1].trim()]||[]).filter(Boolean).join("\n  ")].join("")),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}(0,_postcss.default)(n,this.resourcePath,e,{outputSourceMap:Boolean(o.sourceMap),transformDeclaration:(0,_valueprocessor.default)(this.resourcePath,o),inputSourceMap:r,sourceMapConsumer:t}).catch(u).then(c)}