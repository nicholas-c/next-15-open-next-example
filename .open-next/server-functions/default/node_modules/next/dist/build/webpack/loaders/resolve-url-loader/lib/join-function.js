"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"defaultJoin",{enumerable:!0,get:function(){return defaultJoin}});const _path=_interop_require_default(require("path")),_fs=_interop_require_default(require("fs"));function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}const compose=(e,t)=>(...n)=>e(t(...n)),simpleJoin=compose(_path.default.normalize,_path.default.join),defaultJoin=createJoinForPredicate((function(e,t,n,r,o){const u=simpleJoin(n,t);return _fs.default.existsSync(u)?u:o(0===r?u:null)}),"defaultJoin");function*createIterator(e){for(const t of e)yield t}function createJoinForPredicate(e,t){function n(t,n){const r=createDebugLogger(n.debug);return function(o,u){const i=void 0===u&&createIterator([n.root])||"string"==typeof u&&createIterator([u])||u,a=c([]);return r(createJoinMsg,[t,o,a,a.isFound]),"string"==typeof a.absolute?a.absolute:o;function c(n){const r=i.next();var u=!r.done&&r.value;if("string"==typeof u){const r=e(t,o,u,n.length,a);if("string"==typeof r&&_path.default.isAbsolute(r))return Object.assign(n.concat(u),{isFound:!0,absolute:r});if(Array.isArray(r))return r;throw Object.defineProperty(new Error("predicate must return an absolute path or the result of calling next()"),"__NEXT_ERROR_CODE",{value:"E313",enumerable:!1,configurable:!0})}return n;function a(e){return c(Object.assign(n.concat(u),"string"==typeof e&&{absolute:e}))}}}}function r(){return"[Function: "+t+"]"}return Object.assign(n,t&&{valueOf:r,toString:r})}function createJoinMsg(e,t,n,r){return["resolve-url-loader: "+o(e)+": "+t,...n.map(o).filter(Boolean),...r?["FOUND"]:["NOT FOUND"]].join("\n  ");function o(e){if(e){const t=_path.default.relative(process.cwd(),e).split(_path.default.sep);return(".."===t[0]?e.split(_path.default.sep):["."].concat(t).filter(Boolean)).join("/")}return null}}function createDebugLogger(e){const t=!!e&&("function"==typeof e?e:console.log),n={};return t?o:r;function r(){}function o(e,r){const o=JSON.stringify(r);n[o]||(n[o]=!0,t(e.apply(null,r)))}}exports.createJoinMsg=createJoinMsg,exports.createDebugLogger=createDebugLogger;