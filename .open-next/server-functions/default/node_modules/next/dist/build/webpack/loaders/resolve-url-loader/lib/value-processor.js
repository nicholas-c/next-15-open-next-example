"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _default}});const _loaderutils2=_interop_require_default(require("next/dist/compiled/loader-utils2")),_path=_interop_require_default(require("path"));function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}function valueProcessor(e,t){const r=/(url\s*\()\s*(?:(['"])((?:(?!\2).)*)(\2)|([^'"](?:(?!\)).)*[^'"]))\s*(\))/g,u=_path.default.dirname(e),l=t.join(e,t);return function(e,s){return e.split(r).map(((e,r,n)=>{const a=e||"",d=r%7;if(3===d||5===d){const e=n[r-1],d=(e===n[r+1]&&("'"===e||'"'===e)?a.replace(/\\{2}/g,"\\"):a).split(/([?#])/g),f=d[0],_=o(f)&&l(f,s)||i(f)&&l(f),p=t.keepQuery?d.slice(1).join(""):"";return _?t.absolute?_.replace(/\\/g,"/")+p:_loaderutils2.default.urlToRequest(_path.default.relative(u,_).replace(/\\/g,"/")+p):a}return a})).join("")};function o(e){return!!e&&_loaderutils2.default.isUrlRequest(e,!1)&&!_path.default.isAbsolute(e)&&0!==e.indexOf("~")}function i(e){return!!e&&"string"==typeof t.root&&_loaderutils2.default.isUrlRequest(e,t.root)&&(/^\//.test(e)||_path.default.isAbsolute(e))}}const _default=valueProcessor;