"use strict";function _export(e,o){for(var r in o)Object.defineProperty(e,r,{enumerable:!0,get:o[r]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{deregisterHook:function(){return deregisterHook},registerHook:function(){return registerHook},requireFromString:function(){return requireFromString}});const _nodemodule=_interop_require_default(require("node:module")),_nodefs=require("node:fs"),_nodepath=require("node:path");function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}const oldJSHook=require.extensions[".js"],extensions=[".ts",".cts",".mts",".cjs",".mjs"];function registerHook(e){const{transformSync:o}=require("../swc");require.extensions[".js"]=function(r,n){try{return oldJSHook(r,n)}catch(t){if("ERR_REQUIRE_ESM"!==t.code)throw t;const i=(0,_nodefs.readFileSync)(n,"utf8"),{code:s}=o(i,e);r._compile(s,n)}};for(const r of extensions){const n=require.extensions[r]??oldJSHook;require.extensions[r]=function(r,t){const i=r._compile;return r._compile=function(r,n){const t=o(r,e);return i.call(this,t.code,n)},n(r,t)}}}function deregisterHook(){require.extensions[".js"]=oldJSHook,extensions.forEach((e=>delete require.extensions[e]))}function requireFromString(e,o){const r=_nodemodule.default._nodeModulePaths((0,_nodepath.dirname)(o)),n=new _nodemodule.default(o,module.parent);return n.paths=r,n._compile(e,o),n.exports}