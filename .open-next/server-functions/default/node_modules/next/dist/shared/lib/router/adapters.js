"use strict";function _export(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}Object.defineProperty(exports,"__esModule",{value:!0}),_export(exports,{PathnameContextProviderAdapter:function(){return PathnameContextProviderAdapter},adaptForAppRouterInstance:function(){return adaptForAppRouterInstance},adaptForPathParams:function(){return adaptForPathParams},adaptForSearchParams:function(){return adaptForSearchParams}});const _interop_require_wildcard=require("@swc/helpers/_/_interop_require_wildcard"),_jsxruntime=require("react/jsx-runtime"),_react=_interop_require_wildcard._(require("react")),_hooksclientcontextsharedruntime=require("../hooks-client-context.shared-runtime"),_utils=require("./utils"),_aspathtosearchparams=require("./utils/as-path-to-search-params"),_routeregex=require("./utils/route-regex");function adaptForAppRouterInstance(e){return{back(){e.back()},forward(){e.forward()},refresh(){e.reload()},hmrRefresh(){},push(r,t){let{scroll:a}=void 0===t?{}:t;e.push(r,void 0,{scroll:a})},replace(r,t){let{scroll:a}=void 0===t?{}:t;e.replace(r,void 0,{scroll:a})},prefetch(r){e.prefetch(r)}}}function adaptForSearchParams(e){return e.isReady&&e.query?(0,_aspathtosearchparams.asPathToSearchParams)(e.asPath):new URLSearchParams}function adaptForPathParams(e){if(!e.isReady||!e.query)return null;const r={},t=(0,_routeregex.getRouteRegex)(e.pathname),a=Object.keys(t.groups);for(const t of a)r[t]=e.query[t];return r}function PathnameContextProviderAdapter(e){let{children:r,router:t,...a}=e;const n=(0,_react.useRef)(a.isAutoExport),o=(0,_react.useMemo)((()=>{const e=n.current;if(e&&(n.current=!1),(0,_utils.isDynamicRoute)(t.pathname)){if(t.isFallback)return null;if(e&&!t.isReady)return null}let r;try{r=new URL(t.asPath,"http://f")}catch(e){return"/"}return r.pathname}),[t.asPath,t.isFallback,t.isReady,t.pathname]);return(0,_jsxruntime.jsx)(_hooksclientcontextsharedruntime.PathnameContext.Provider,{value:o,children:r})}