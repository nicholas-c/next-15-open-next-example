"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getNextPathnameInfo",{enumerable:!0,get:function(){return getNextPathnameInfo}});const _normalizelocalepath=require("../../i18n/normalize-locale-path"),_removepathprefix=require("./remove-path-prefix"),_pathhasprefix=require("./path-has-prefix");function getNextPathnameInfo(e,a){var t;const{basePath:n,i18n:r,trailingSlash:l}=null!=(t=a.nextConfig)?t:{},i={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):l};n&&(0,_pathhasprefix.pathHasPrefix)(i.pathname,n)&&(i.pathname=(0,_removepathprefix.removePathPrefix)(i.pathname,n),i.basePath=n);let o=i.pathname;if(i.pathname.startsWith("/_next/data/")&&i.pathname.endsWith(".json")){const e=i.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),t=e[0];i.buildId=t,o="index"!==e[1]?"/"+e.slice(1).join("/"):"/",!0===a.parseData&&(i.pathname=o)}if(r){let e=a.i18nProvider?a.i18nProvider.analyze(i.pathname):(0,_normalizelocalepath.normalizeLocalePath)(i.pathname,r.locales);var h;i.locale=e.detectedLocale,i.pathname=null!=(h=e.pathname)?h:i.pathname,!e.detectedLocale&&i.buildId&&(e=a.i18nProvider?a.i18nProvider.analyze(o):(0,_normalizelocalepath.normalizeLocalePath)(o,r.locales),e.detectedLocale&&(i.locale=e.detectedLocale))}return i}