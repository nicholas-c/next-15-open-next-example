"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getTypeScriptConfiguration",{enumerable:!0,get:function(){return getTypeScriptConfiguration}});const _picocolors=require("../picocolors"),_os=_interop_require_default(require("os")),_path=_interop_require_default(require("path")),_fatalerror=require("../fatal-error"),_iserror=_interop_require_default(require("../is-error"));function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}async function getTypeScriptConfiguration(e,r,t){try{var o;const i={getCanonicalFileName:e=>e,getCurrentDirectory:e.sys.getCurrentDirectory,getNewLine:()=>_os.default.EOL},{config:a,error:n}=e.readConfigFile(r,e.sys.readFile);if(n)throw Object.defineProperty(new _fatalerror.FatalError(e.formatDiagnostic(n,i)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});let l=a;const s=e.parseJsonConfigFileContent(l,t?{...e.sys,readDirectory:(e,r,t,o,i)=>[r?`file${r[0]}`:"file.ts"]}:e.sys,_path.default.dirname(r));if(s.errors&&(s.errors=s.errors.filter((({code:e})=>18003!==e))),null==(o=s.errors)?void 0:o.length)throw Object.defineProperty(new _fatalerror.FatalError(e.formatDiagnostic(s.errors[0],i)),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}catch(e){if((0,_iserror.default)(e)&&"SyntaxError"===e.name){const r="\n"+(e.message??"");throw Object.defineProperty(new _fatalerror.FatalError((0,_picocolors.bold)("Could not parse"+(0,_picocolors.cyan)("tsconfig.json")+". Please make sure it contains syntactically correct JSON.")+r),"__NEXT_ERROR_CODE",{value:"E339",enumerable:!1,configurable:!0})}throw e}}