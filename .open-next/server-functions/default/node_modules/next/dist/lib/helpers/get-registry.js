"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getRegistry",{enumerable:!0,get:function(){return getRegistry}});const _child_process=require("child_process"),_getpkgmanager=require("./get-pkg-manager"),_utils=require("../../server/lib/utils");function getRegistry(e=process.cwd()){const t=(0,_getpkgmanager.getPkgManager)(e),r="npm"===t?"--no-workspaces":"";let s="https://registry.npmjs.org/";try{const e=(0,_child_process.execSync)(`${t} config get registry ${r}`,{env:{...process.env,NODE_OPTIONS:(0,_utils.getFormattedNodeOptionsWithoutInspect)()}}).toString().trim();e.startsWith("http")&&(s=e.endsWith("/")?e:`${e}/`)}catch(e){throw Object.defineProperty(new Error(`Failed to get registry from "${t}".`,{cause:e}),"__NEXT_ERROR_CODE",{value:"E508",enumerable:!1,configurable:!0})}return s}