"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"install",{enumerable:!0,get:function(){return install}});const _picocolors=require("../picocolors"),_crossspawn=_interop_require_default(require("next/dist/compiled/cross-spawn"));function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}function install(e,o,{packageManager:n,isOnline:s,devDependencies:l}){let t=[];return o.length>0?("yarn"===n?(t=["add","--exact"],l&&t.push("--dev")):"pnpm"===n?(t=["add","--save-exact"],t.push(l?"--save-dev":"--save-prod")):(t=["install","--save-exact"],t.push(l?"--save-dev":"--save")),t.push(...o)):(t=["install"],s||(t.push("--offline"),console.log((0,_picocolors.yellow)("You appear to be offline.")),"npm"!==n&&console.log((0,_picocolors.yellow)(`Falling back to the local ${n} cache.`)),console.log())),new Promise(((o,s)=>{(0,_crossspawn.default)(n,t,{cwd:e,stdio:"inherit",env:{...process.env,ADBLOCK:"1",NODE_ENV:"development",DISABLE_OPENCOLLECTIVE:"1"}}).on("close",(e=>{0===e?o():s({command:`${n} ${t.join(" ")}`})}))}))}