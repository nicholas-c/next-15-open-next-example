"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"hasNecessaryDependencies",{enumerable:!0,get:function(){return hasNecessaryDependencies}});const _fs=require("fs"),_resolvefrom=require("./resolve-from"),_path=require("path");async function hasNecessaryDependencies(e,s){let r=new Map;const t=[];return await Promise.all(s.map((async s=>{try{const n=await _fs.promises.realpath((0,_resolvefrom.resolveFrom)(e,`${s.pkg}/package.json`)),o=(0,_path.dirname)(n);if(s.exportsRestrict){const e=(0,_path.relative)(s.pkg,s.file);if(e){const n=(0,_path.join)(o,e);if(!(0,_fs.existsSync)(n))return t.push(s);r.set(s.pkg,n)}else r.set(s.pkg,n)}else r.set(s.pkg,(0,_resolvefrom.resolveFrom)(e,s.file))}catch(e){return t.push(s)}}))),{resolved:r,missing:t}}