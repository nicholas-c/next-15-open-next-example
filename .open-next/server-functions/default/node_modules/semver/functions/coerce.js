const SemVer=require("../classes/semver"),parse=require("./parse"),{safeRe:re,t:t}=require("../internal/re"),coerce=(e,r)=>{if(e instanceof SemVer)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((r=r||{}).rtl){const l=r.includePrerelease?re[t.COERCERTLFULL]:re[t.COERCERTL];let s;for(;(s=l.exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&s.index+s[0].length===n.index+n[0].length||(n=s),l.lastIndex=s.index+s[1].length+s[2].length;l.lastIndex=-1}else n=e.match(r.includePrerelease?re[t.COERCEFULL]:re[t.COERCE]);if(null===n)return null;const l=n[2],s=n[3]||"0",i=n[4]||"0",u=r.includePrerelease&&n[5]?`-${n[5]}`:"",c=r.includePrerelease&&n[6]?`+${n[6]}`:"";return parse(`${l}.${s}.${i}${u}${c}`,r)};module.exports=coerce;