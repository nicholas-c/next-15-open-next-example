globalThis.disableIncrementalCache = true;globalThis.disableDynamoDBCache = true;globalThis.isNextAfter15 = true;globalThis.openNextDebug = false;globalThis.openNextVersion = "3.4.2";
var m=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var C=Object.prototype.hasOwnProperty;var y=(a,e)=>{for(var t in e)m(a,t,{get:e[t],enumerable:!0})},E=(a,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of w(e))!C.call(a,i)&&i!==t&&m(a,i,{get:()=>e[i],enumerable:!(n=_(e,i))||n.enumerable});return a};var N=a=>E(m({},"__esModule",{value:!0}),a);var R={};y(R,{default:()=>g});module.exports=N(R);var P=new Set(["application/octet-stream","application/epub+zip","application/msword","application/pdf","application/rtf","application/vnd.amazon.ebook","application/vnd.ms-excel","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","font/otf","font/woff","font/woff2","image/bmp","image/gif","image/jpeg","image/png","image/tiff","image/vnd.microsoft.icon","image/webp","audio/3gpp","audio/aac","audio/basic","audio/flac","audio/mpeg","audio/ogg","audio/wavaudio/webm","audio/x-aiff","audio/x-midi","audio/x-wav","video/3gpp","video/mp2t","video/mpeg","video/ogg","video/quicktime","video/webm","video/x-msvideo","application/java-archive","application/vnd.apple.installer+xml","application/x-7z-compressed","application/x-apple-diskimage","application/x-bzip","application/x-bzip2","application/x-gzip","application/x-java-archive","application/x-rar-compressed","application/x-tar","application/x-zip","application/zip","application/x-protobuf"]);function b(a){if(!a)return!1;let e=a?.split(";")[0]??"";return P.has(e)}function h(a){try{return"__openNextInternal"in a}catch{return!1}}function c(...a){globalThis.openNextDebug&&console.log(...a)}function T(...a){console.warn(...a)}var A=[{clientName:"S3Client",commandName:"GetObjectCommand",errorName:"NoSuchKey"}],L=a=>A.some(e=>e.clientName===a?.clientName&&e.commandName===a?.commandName&&(e.errorName===a?.error?.name||e.errorName===a?.error?.Code));function v(...a){if(a.some(e=>L(e)))return c(...a);if(a.some(e=>h(e))){let e=a.find(t=>h(t));return e.logLevel<M()?void 0:e.logLevel===0?console.log(...a.map(t=>h(t)?`${t.name}: ${t.message}`:t)):e.logLevel===1?T(...a.map(t=>h(t)?`${t.name}: ${t.message}`:t)):console.error(...a)}console.error(...a)}function M(){switch((process.env.OPEN_NEXT_ERROR_LOG_LEVEL??"1").toLowerCase()){case"debug":case"0":return 0;case"error":case"2":return 2;default:return 1}}function I(a){return typeof a=="boolean"?a:typeof a=="object"?a.kindHint==="fetch"||a.fetchCache||a.kind==="FETCH":!1}var g=class{async get(e,t){if(globalThis.openNextConfig.dangerous?.disableIncrementalCache)return null;let n=typeof t=="object"?t.softTags:[],i=typeof t=="object"?t.tags:[];return I(t)?this.getFetchCache(e,n,i):this.getIncrementalCache(e)}async getFetchCache(e,t,n){c("get fetch cache",{key:e,softTags:t,tags:n});try{let i=await globalThis.incrementalCache.get(e,!0);if(i?.value===void 0)return null;let o=await globalThis.tagCache.getLastModified(e,i?.lastModified);if(o===-1)return null;if((n??[]).length===0){let s=t?.find(l=>l.startsWith("_N_T_/")&&!l.endsWith("layout")&&!l.endsWith("page"));if(s&&await globalThis.tagCache.getLastModified(s.replace("_N_T_/",""),i.lastModified)===-1)return null}return{lastModified:o,value:i.value}}catch(i){return c("Failed to get fetch cache",i),null}}async getIncrementalCache(e){try{let t=await globalThis.incrementalCache.get(e,!1);if(!t?.value)return null;let n=t.value.meta,i=await globalThis.tagCache.getLastModified(e,t?.lastModified);if(i===-1)return null;let o=t?.value,s=globalThis.__openNextAls.getStore()?.requestId??"";return globalThis.lastModified[s]=i,o?.type==="route"?{lastModified:i,value:{kind:globalThis.isNextAfter15?"APP_ROUTE":"ROUTE",body:Buffer.from(o.body??Buffer.alloc(0),b(String(n?.headers?.["content-type"]))?"base64":"utf8"),status:n?.status,headers:n?.headers}}:o?.type==="page"||o?.type==="app"?globalThis.isNextAfter15&&o?.type==="app"?{lastModified:i,value:{kind:"APP_PAGE",html:o.html,rscData:Buffer.from(o.rsc),status:n?.status,headers:n?.headers,postponed:n?.postponed}}:{lastModified:i,value:{kind:globalThis.isNextAfter15?"PAGES":"PAGE",html:o.html,pageData:o.type==="page"?o.json:o.rsc,status:n?.status,headers:n?.headers}}:o?.type==="redirect"?{lastModified:i,value:{kind:"REDIRECT",props:o.props}}:(T("Unknown cache type",o),null)}catch(t){return c("Failed to get body cache",t),null}}async set(e,t,n){if(globalThis.openNextConfig.dangerous?.disableIncrementalCache)return;let i=globalThis.__openNextAls.getStore()?.pendingPromiseRunner.withResolvers();try{if(t==null)await globalThis.incrementalCache.delete(e);else switch(t.kind){case"ROUTE":case"APP_ROUTE":{let{body:r,status:d,headers:f}=t;await globalThis.incrementalCache.set(e,{type:"route",body:r.toString(b(String(f["content-type"]))?"base64":"utf8"),meta:{status:d,headers:f}},!1);break}case"PAGE":case"PAGES":{let{html:r,pageData:d,status:f,headers:p}=t;typeof d=="string"?await globalThis.incrementalCache.set(e,{type:"app",html:r,rsc:d,meta:{status:f,headers:p}},!1):await globalThis.incrementalCache.set(e,{type:"page",html:r,json:d},!1);break}case"APP_PAGE":{let{html:r,rscData:d,headers:f,status:p}=t;await globalThis.incrementalCache.set(e,{type:"app",html:r,rsc:d.toString("utf8"),meta:{status:p,headers:f}},!1);break}case"FETCH":await globalThis.incrementalCache.set(e,t,!0);break;case"REDIRECT":await globalThis.incrementalCache.set(e,{type:"redirect",props:t.props},!1);break;case"IMAGE":break}let o=t?.kind==="FETCH"?n?.tags??t?.data?.tags??[]:t?.kind==="PAGE"?t.headers?.["x-next-cache-tags"]?.split(",")??[]:[];c("derivedTags",o);let s=await globalThis.tagCache.getByPath(e),l=o.filter(r=>!s.includes(r));l.length>0&&await globalThis.tagCache.writeTags(l.map(r=>({path:e,tag:r,revalidatedAt:1}))),c("Finished setting cache")}catch(o){v("Failed to set cache",o)}finally{i?.resolve()}}async revalidateTag(e){let t=globalThis.openNextConfig.dangerous;if(!(t?.disableTagCache||t?.disableIncrementalCache))try{let n=Array.isArray(e)?e:[e];for(let i of n){c("revalidateTag",i);let o=await globalThis.tagCache.getByTag(i);c("Items",o);let s=o.map(r=>({path:r,tag:i}));if(i.startsWith("_N_T_/"))for(let r of o){let f=(await globalThis.tagCache.getByPath(r)).filter(p=>!p.startsWith("_N_T_/"));for(let p of f){let u=await globalThis.tagCache.getByTag(p);c({hardTag:p,_paths:u}),s.push(...u.map(x=>({path:x,tag:p})))}}await globalThis.tagCache.writeTags(s);let l=Array.from(new Set(s.filter(r=>r.tag.startsWith("_N_T_/")).map(r=>`/${r.path}`)));l.length>0&&await globalThis.cdnInvalidationHandler.invalidatePaths(l.map(r=>({initialPath:r,rawPath:r,resolvedRoutes:[{route:r,type:"app"}]})))}}catch(n){v("Failed to revalidate tag",n)}}};
